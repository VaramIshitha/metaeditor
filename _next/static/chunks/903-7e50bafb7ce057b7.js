(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{1227:function(e,t,n){"use strict";var r=n(3454),i=n(5877),o=i(n(2262)),a=i(n(5959)),s=i(n(2179)),c=i(n(7247)),u=i(n(2777)),l=i(n(4147));function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var f=function(e){(0,a.default)(n,e);var t=d(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).staticPath=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"/static/".concat(t.join("/"))},e.staticUrl=function(){var t;return e.data.homepage+(t=e).staticPath.apply(t,arguments)},e.apiPath=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return"".concat(e.config.api_host,"/api/").concat(e.namespace,"/").concat(n.join("/"))},e}return(0,o.default)(n,[{key:"languages",get:function(){return{en:"English",ru:"Russian"}}},{key:"routing",get:function(){return{home:"/"}}},{key:"data",get:function(){var e={siteLogoName:"MetaEditor",defaultTitle:"MetaEditor",host:"metaeditor.io",homepage:"",favicons:{default:this.staticPath("favicons","favicon.png"),small:this.staticPath("favicons","16.png"),normal:this.staticPath("favicons","48.png"),large:this.staticPath("favicons","128.png")},logo_svg:{icon:this.staticPath("logo_icon.svg"),white:this.staticPath("logo_white.svg")}};return this.isProd&&(e.homepage=l.default.homepage),e}},{key:"seo",get:function(){return{og_image:this.staticUrl("seo","og_default.jpg?v=".concat(l.default.version))}}},{key:"credentials",get:function(){return{}}},{key:"config",get:function(){var e={web_host:"https://"+this.data.host,api_host:"https://"+this.data.host};if(this.isDev){var t="127.0.0.1";e.web_host="http://".concat(t,":3000"),e.api_host="https://".concat(t,":8000")}return e}}]),n}((function e(){(0,u.default)(this,e);var t=r.env.isDev||!1;this.isDev=t,this.isProd=!t}));e.exports=new f},9665:function(e,t,n){var r=n(1227);e.exports={env:r}},8401:function(e,t,n){"use strict";var r=n(5877),i=r(n(9071)),o=r(n(3681)),a=r(n(2466)),s=r(n(4927)),c=r(n(7076)),u=r(n(6874)),l=r(n(3537)),d=r(n(7298)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(3865)),p=n(4174);function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}e.exports={useStorage:i.default,useMedia:o.default,useContainerDimensions:a.default,useHelpers:s.default,useNotify:c.default,useUnload:u.default,useSound:l.default,useDevice:d.default,useHotkeys:f.default,useIsHotkeyPressed:f.useIsHotkeyPressed,useStateEvents:p.useStateEvents,useReducerEvents:p.useReducerEvents}},2466:function(e,t,n){"use strict";n.r(t);var r=n(6835),i=n(7294),o=n(7944);t.default=function(e){var t=function(){if(!e.current)return s;var t=e.current,n=t.offsetWidth,r=t.offsetHeight;return{width:n,height:r,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft,scrollWidth:t.scrollWidth-n,scrollHeight:t.scrollHeight-r}},n=i.useState({width:0,height:0,scrollTop:0,scrollLeft:0}),a=(0,r.Z)(n,2),s=a[0],c=a[1],u=function(){return c(t())};return i.useLayoutEffect((function(){u()}),[e.current]),(0,o.Z)(e.current,(function(e){u()})),i.useEffect((function(){var n;return c(t()),null===(n=e.current)||void 0===n||n.addEventListener("scroll",u),window.addEventListener("resize",u),function(){var t;window.removeEventListener("resize",u),null===(t=e.current)||void 0===t||t.removeEventListener("scroll",u)}}),[e.current]),s}},7298:function(e,t,n){"use strict";n.r(t);n(7294);var r=n(5518);t.default=function(){return{BrowserView:r.I3,MobileView:r.$,isBrowser:r.jU,isMobile:r.tq}}},4174:function(e,t,n){"use strict";n.r(t),n.d(t,{useStateEvents:function(){return o},useReducerEvents:function(){return a}});var r=n(6835),i=n(7294);function o(e){var t=i.useState(e),n=(0,r.Z)(t,2),o=n[0],a=n[1],s=i.useRef(o);return i.useEffect((function(){s.current=o}),[o]),[o,a,s]}function a(e,t){var n=i.useReducer(e,t),o=(0,r.Z)(n,2),a=o[0],s=o[1],c=i.useRef(a);return i.useEffect((function(){c.current=a}),[a]),[a,s,c]}t.default=void 0},4927:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(2777),i=n(2262),o=new(function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,[{key:"makeUuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}},{key:"nl2br",value:function(e){return e?e.replace(/(?:\r\n|\r|\n)/g,"<br>"):""}},{key:"formatNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.decimal,r=void 0===n?2:n,i=t.addon,o=void 0===i?"":i,a=t.separator,s=void 0===a?",":a;if("undefined"===typeof e||0==e.toString().length)return"...";if(!e&&0!=e)return"...";try{var c=parseFloat(e.toString()).toFixed(r).split("."),u=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,s),l=r>0?"".concat(u,".").concat(c[1]):u;return o?"".concat(o," ").concat(l):l}catch(d){return"Error"}}},{key:"formatMoney",value:function(e,t){return this.formatNumber(e,{decimal:0,addon:t,separator:" "})}},{key:"formatNumberShortener",value:function(e){if(e>=1e6){var t=e/1e6,n=t.toFixed(Number.isInteger(t)?0:1);return"".concat(n," M")}return e>=1e3?"".concat((e/1e3).toFixed(0)," K"):e}},{key:"formatSeconds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.seconds,n=e.variant,r=void 0!==n&&n,i=parseInt(t,10),o=Math.floor(i/3600),a=Math.floor((i-3600*o)/60),s=i-3600*o-60*a;return o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),"small"==r?(o=Math.round(o),a=Math.round(a),s=Math.round(s),t>3600?"".concat(o," h. ").concat(a," m."):"".concat(a," min.")):"seconds"==r?(o=Math.round(o),a=Math.round(a),s=Math.round(s),a?"".concat(a," m ").concat(s," s."):"".concat(s," s.")):"".concat(o,":").concat(a,":").concat(s)}},{key:"formatMegabytes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.formatBytes(1024*e*1024,t)}},{key:"formatBytes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,r=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,o)).toFixed(r))+" "+i[o]}},{key:"plainTextToLinks",value:function(e){return e?(t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,n=/(^|[^\/])(www\.[\S]+(\b|$))/gim,r=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,e.replace(t,'<a data-link rel="nofollow" href="$1" target="_blank">$1</a>').replace(n,'$1<a data-link rel="nofollow" href="http://$2" target="_blank">$2</a>').replace(r,'<a data-link rel="nofollow" href="mailto:$1">$1</a>')):"";var t,n,r}},{key:"plainTextShortener",value:function(e,t){return"string"!==typeof e?"":(e.length>t&&(e=e.substr(0,t)+"..."),e)}},{key:"getRandomFloat",value:function(e,t){return Math.random()*(t-e)+e}},{key:"getRandomInt",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"getRandomBool",value:function(){return Math.random()>=.5}}]),e}()),a=o,s=new(function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,[{key:"toSqFt",value:function(e){return"object"===typeof e?e.join("-")+" Sq Ft":parseInt(e,0)+" Sq Ft"}},{key:"toFt",value:function(e){return parseInt(e,0)+" Ft"}},{key:"toUsd",value:function(e){return a.formatNumber(e,{decimal:0,addon:"$",separator:" "})}}]),e}()),c=n(7812),u=n(6486),l=n.n(u),d=new(function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,[{key:"split",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return l().chunk(e,Math.round(e.length/t))}},{key:"uniqPlainArray",value:function(e){e=e.filter((function(e){return e}));var t=new Map(e.map((function(e){return[e.toLowerCase(),e]})));return(0,c.Z)(t.values())}}]),e}()),f=d,p=function(){return{format:a,custom:s,array:f}}},3865:function(e,t,n){"use strict";n.r(t),n.d(t,{useIsHotkeyPressed:function(){return r.p2}});var r=n(9218);t.default=r.y1},3681:function(e,t,n){"use strict";n.r(t);n(7294);var r=n(2734),i=n(8396);t.default=function(){return(0,r.Z)(),function(){for(var e={up:{},down:{},only:{}},t=function(){var t=r[n];e.up[t]=(0,i.Z)((function(e){return e.breakpoints.up(t)})),e.down[t]=(0,i.Z)((function(e){return e.breakpoints.down(t)})),e.only[t]=(0,i.Z)((function(e){return e.breakpoints.only(t)}))},n=0,r=["xs","sm","md","lg","xl"];n<r.length;n++)t();return e}()}},7076:function(e,t,n){"use strict";n.r(t);var r=n(9499),i=n(2777),o=n(2262),a=n(6254);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e=(0,a.Ds)(),t=e.enqueueSnackbar,n=e.closeSnackbar,r=new(function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"classByKey",value:function(e){n(e)}},{key:"_make",value:function(e,n,r){var i=e;"object"===typeof e&&n.title&&(i=c(c({},e),{},{title:n.title})),t(i,c({variant:r,key:void 0,persist:!1,preventDuplicate:!0,anchorOrigin:{vertical:"top",horizontal:"left"}},n))}},{key:"default",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._make.apply(this,t.concat(["default"]))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._make.apply(this,t.concat(["info"]))}},{key:"success",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._make.apply(this,t.concat(["success"]))}},{key:"warning",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._make.apply(this,t.concat(["warning"]))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._make.apply(this,t.concat(["error"]))}}]),e}());return r}},3537:function(e,t,n){"use strict";n.r(t);var r=n(6835),i=n(7294),o=n(619);t.default=function(e){var t=i.useState(.99),n=(0,r.Z)(t,2),a=n[0],s=(n[1],(0,o.Z)(e,{playbackRate:a,interrupt:!0})),c=(0,r.Z)(s,2),u=c[0],l=c[1];return{play:function(){u()},stop:l.stop,pause:l.pause,duration:l.duration,sound:l.sound}}},9071:function(e,t,n){"use strict";n.r(t);t.default=function(){var e=function(e){return"".concat(null!==e&&void 0!==e?e:"session","Storage")};return{getItem:function(t,n){var r=window[e(n)][t];try{r=JSON.parse(r)}catch(i){}return r},setItem:function(t,n,r){if("object"===typeof n)try{n=JSON.stringify(n)}catch(i){console.error("Can't serialize data",i)}return window[e(r)].setItem(t,n),!0},removeItem:function(t,n){window[e(n)].removeItem(t)}}}},6874:function(e,t,n){"use strict";n.r(t);var r=n(7294),i=n(9665);t.default=function(e){var t=r.useRef(e);r.useEffect((function(){t.current=e}),[e]),r.useEffect((function(){if(!i.env.isDev){var e=function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}}),[])}},6555:function(e,t,n){"use strict";var r=n(29),i=n(2777),o=n(2262),a=n(7757),s=n.n(a),c=new(function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"request",value:function(){var e=(0,r.Z)(s().mark((function e(t,n){var i,o,a=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=a.length>2&&void 0!==a[2]?a[2]:{},o={method:t,mode:"cors",headers:{"Content-Type":"application/json"}};try{o.body=JSON.stringify(i.body)}catch(c){}return e.next=5,fetch(n,o).then(function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=t.status,e.next=4,t.json();case 4:return e.t1=e.sent,e.abrupt("return",{status:e.t0,body:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",{status:t.status,error:e.t2});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"GET",value:function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("GET",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"POST",value:function(){var e=(0,r.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("POST",t,{body:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"DELETE",value:function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("DELETE",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());t.Z=c},266:function(e,t,n){var r=n(6555).Z;e.exports={Request:r}},5903:function(e,t,n){"use strict";n.d(t,{Z:function(){return $a}});var r=n(9499),i=n(4730),o=n(7294),a=n(9665),s=n(2777),c=n(2262),u=n(6835),l=n(29),d=n(7812),f=n(7757),p=n.n(f);var h=function(){var e=o.useState({width:void 0,height:void 0}),t=(0,u.Z)(e,2),n=t[0],r=t[1];return o.useEffect((function(){function e(){r({width:window.innerWidth,height:window.innerHeight});var e=document.documentElement;e.style.setProperty("--window-width",window.innerWidth+"px"),e.style.setProperty("--window-height",window.innerHeight+"px")}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),{width:n.width,height:n.height}};var m=n(381),v=n.n(m);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={users_count:0,loaded:!1,connected:!1,error:!1,closed:!1,callback_loading:!1,callback_caller:!1},x=y(y({},b),{},{stream_config:!1,mouse_moving:!1,aggregated_stats:!1,window_size:{width:0,height:0},resolution_multiplier:1,quality_speed:!1,last_interaction:null,volume:null,body_clicked:!1}),w={UPDATE:"UPDATE"};var j={defaultState:b,initialState:x,KEY:w,reducer:function(e,t){var n=t.type,r=t.payload;return n===w.UPDATE?y(y({},e),r):e}},C=n(5959),S=n(2179),O=n(7247),P=n(1987),k=n.n(P),T=n(5708),R=n.n(T),E=function(){function e(){(0,s.default)(this,e)}return(0,c.default)(e,[{key:"emitConsole",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=function(){e.forEach((function(e,n){t.emit({type:"console_command",value:{command:e}})}))};if(!this.timeout_console)return r(),void(this.timeout_console=!0);clearTimeout(this.timeout_console),this.timeout_console=setTimeout((function(){r(),clearTimeout(t.timeout_console)}),1e3*n)}},{key:"setFps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;this.emitConsole(["t.maxfps ".concat(e)],5)}},{key:"resetBitrate",value:function(){this.emitConsole(["PixelStreaming.Encoder.MaxBitrate 0"],5)}},{key:"resetPrioritiseQuality",value:function(){this.emitConsole(["Streamer.PrioritiseQuality"],5)}},{key:"resize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n={width:2388,height:1428};function r(e,t,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return t*=o,(e*=o)>r||t>i?n:{width:Math.round(e),height:Math.round(t)}}var i=r(window.innerWidth,window.innerHeight,n.width,n.height,t),o=i.width,a=i.height;clearTimeout(this.resize_timeout),this.resize_timeout=setTimeout((function(){e.emitConsole(["PixelStreaming.Capturer.UseBackBufferSize 0","PixelStreaming.Capturer.CaptureSize ".concat(o,"x").concat(a),"r.SetRes ".concat(o,"x").concat(a,"f")])}),1e3)}}]),e}(),D=E,_=n(4257),Z=new(function(){return function e(){(0,s.default)(this,e),this.app_key="__ps__",this.callback_key="__ps__callback__"}}());function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,O.default)(e);if(t){var i=(0,O.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,S.default)(this,n)}}function L(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=ne;!function(e,t){for(var n=ne,r=e();;)try{if(425354===parseInt(n(478))/1+-parseInt(n(817))/2*(parseInt(n(841))/3)+parseInt(n(404))/4+-parseInt(n(654))/5*(-parseInt(n(724))/6)+parseInt(n(532))/7+parseInt(n(854))/8+-parseInt(n(851))/9*(parseInt(n(481))/10))break;r.push(r.shift())}catch(i){r.push(r.shift())}}(tt);var U,F,N,W,H=null,q=!0,V=!1,G=(new Date)[z(534)](),K=new Map,J=null,Q=!0,Y={receiving:!1,size:0,jpeg:void 0,height:0,width:0,valid:!1},$={enabled:!1,warnTimeout:120,closeTimeout:10,active:!1,overlay:void 0,warnTimer:void 0,countdown:0,countdownTimer:void 0},X=void 0,ee=void 0;Date[z(865)]();function te(){if(H){H.startLatencyTest((function(e){var t={StartTime:e};_e(De[ne(411)],t)}))}}function ne(e,t){var n=tt();return(ne=function(e,t){return n[e-=403]})(e,t)}function re(e,t,n){var r=z;return ct[r(547)]}function ie(e){var t=z,n=document[t(623)](t(688));n.id=t(673),n[t(738)]=e||"",re(t(796))}function oe(){var e=z,t=document[e(623)](e(572));t.id=e(807),t[e(452)]=e(743),t[e(713)]=e(789),re(e(642)),Q=!1}function ae(){var e=z;$[e(547)][e(738)]=e(862)+$[e(675)]+e(580)}function se(){var e=z;$[z(448)]=!1,$[e(547)]=document.createElement(e(688)),$[e(547)].id=e(486),re(e(642),$[e(547)]),$[e(675)]=$[e(435)],ae(),Ce[e(741)]==je[e(457)]&&document[e(805)](),$[e(514)]=setInterval((function(){var t=e;$[t(675)]--,0==$[t(675)]?(ce(),U[t(716)]()):ae()}),1e3)}function ce(){re(z(609))}function ue(){var e=z;$[e(448)]=$[e(473)],le()}function le(){var e=z;$[e(448)]&&(clearTimeout($[e(778)]),$[e(778)]=setTimeout((function(){se()}),1e3*$[e(725)]))}function de(e){var t=z;H&&(le(),H[t(820)](e))}var fe={QualityControlOwnership:0,Response:1,Command:2,FreezeFrame:3,UnfreezeFrame:4,VideoEncoderAvgQP:5,LatencyTest:6,InitialSettings:7},pe=z(834);function he(e,t){var n=z;function r(){var e=n;_.Z[e(863)](e(447));var t=btoa(Y[e(802)][e(621)]((function(e,t){return e+String.fromCharCode(t)}),""));alert(e(536)),J[e(452)]=e(798)+t,J[e(598)]=function(){var t=e;Y[t(599)]=J.naturalHeight,Y.width=J[t(824)],Pe(),Q?(oe(),ke()):Se()}}return _.Z[n(863)](n(520)),H=new(R())({peerConnectionOptions:t[n(692)]}),e[n(564)](H[n(864)]),e[n(564)](J),H[n(600)]=function(e){var t=n;if(_.Z[t(863)]("webRtcPlayerObj.onWebRtcOffer"),U&&1===U.readyState){var r=JSON[t(734)](e);_.Z.log(t(683)+r),U.send(r)}},H[n(663)]=function(e){var t=n;_.Z.func(t(782)),U&&1===U.readyState&&(_.Z.log("-> SS: iceCandidate\n"+JSON[t(734)](e,void 0,4)),U[t(820)](JSON.stringify({type:t(545),candidate:e})))},H.onVideoInitialised=function(){var e=n;_.Z.func(e(733)),U&&1===U[e(533)]&&(ct[e(449)](),Q&&(oe(),ke()))},H[n(687)]=function(){var e=n;_.Z.func(e(827)),U&&1===U[e(533)]&&(ie(e(426)),H[e(864)]&&H.video[e(731)]&&H[e(449)]&&H[e(449)]())},H[n(622)]=function(e){var t=n,i=new Uint8Array(e);if(ct.onDataChannelMessage(i),Y.receiving){var o=new Uint8Array(Y[t(802)][t(524)]+i[t(524)]);o[t(585)](Y[t(802)],0),o[t(585)](i,Y[t(802)][t(524)]),Y[t(802)]=o,Y[t(802)][t(524)]===Y[t(833)]?(Y[t(686)]=!1,Y[t(627)]=!0,_.Z.log("received complete freeze frame "+Y[t(833)]),r()):Y[t(802)][t(524)]>Y[t(833)]?(_.Z[t(596)](t(619)+Y[t(802)][t(524)]+"/"+Y[t(833)]),Y.jpeg=void 0,Y[t(686)]=!1):_.Z.log(t(530)+i.length+t(506)+Y[t(802)][t(524)]+"/"+Y[t(833)])}else if(i[0]===fe[t(842)]){var a=0!==i[1];_.Z[t(667)](t(418)+a),null!==F&&(F.disabled=a,F.checked=a)}else if(i[0]===fe[t(513)]){var s,c=new TextDecoder(t(684))[t(612)](e[t(709)](1)),u=L(K.values());try{for(u.s();!(s=u.n()).done;){(0,s.value)(c)}}catch(v){u.e(v)}finally{u.f()}}else if(i[0]===fe[t(638)]){var l=new TextDecoder("utf-16")[t(612)](e[t(709)](1));_.Z[t(667)](l);var d=JSON[t(717)](l);d[t(429)]===t(444)&&function(e){var t=z;if(_.Z[t(863)](t(674)),e.showOnScreenKeyboard){X[t(703)].remove(t(609));var n=it(e.x,e.y);X[t(799)][t(618)]=n.y[t(705)]()+"px",X[t(799)][t(837)]=(n.x-40)[t(705)]()+"px"}else X.classList[t(540)](t(609)),ee.blur()}(d)}else if(i[0]===fe[t(467)])Y.size=new DataView(i[t(709)](1,5)[t(735)]).getInt32(0,!0),Y.jpeg=i[t(709)](5),Y.jpeg[t(524)]<Y[t(833)]?(_.Z.log("received first chunk of freeze frame: "+Y[t(802)][t(524)]+"/"+Y.size),Y.receiving=!0):(_.Z.log("received complete freeze frame: "+Y[t(802)][t(524)]+"/"+Y[t(833)]),r());else if(i[0]===fe.UnfreezeFrame)Oe();else if(i[0]===fe[t(730)])pe=new TextDecoder(t(684))[t(612)](e.slice(1));else if(i[0]==fe[t(411)]){var f=new TextDecoder("utf-16").decode(e[t(709)](1));_.Z[t(667)]("Got latency timings from UE."),_.Z[t(667)](f);var p=JSON.parse(f);H&&H.latencyTestTimings[t(809)](p)}else if(i[0]==fe[t(516)]){var h=new TextDecoder(t(684))[t(612)](e[t(709)](1)),m=JSON[t(717)](h);m[t(474)]&&(document[t(746)](t(485))[t(511)]=m[t(474)].RateControl,document.getElementById(t(767))[t(511)]=m[t(474)][t(787)]>0?m.Encoder.TargetBitrate/1e3:m[t(474)][t(787)],document[t(746)](t(422))[t(511)]=m[t(474)][t(466)]>0?m.Encoder[t(466)]/1e3:m.Encoder[t(466)],document[t(746)](t(636))[t(511)]=m[t(474)][t(752)],document.getElementById("encoder-max-qp-text")[t(511)]=m[t(474)].MaxQP,document[t(746)](t(694))[t(491)]=1==m[t(474)][t(488)],document[t(746)](t(711))[t(511)]=m.Encoder[t(745)]),m[t(763)]&&(document[t(746)](t(507))[t(511)]=m.WebRTC[t(441)],document[t(746)](t(722))[t(511)]=m[t(763)].MaxFPS,document[t(746)]("webrtc-min-bitrate-text")[t(511)]=m[t(763)][t(489)]/1e3,document[t(746)](t(825)).value=m[t(763)][t(466)]/1e3,document[t(746)](t(571)).value=m[t(763)][t(780)],document.getElementById(t(500))[t(511)]=m[t(763)][t(659)])}else _.Z[t(596)](t(794)+i[0])},function(e){var t=z;if(_.Z[t(863)]("registerInputs"),!e)return;n=e,n.onmouseenter=function(e){var t=ne,r=new DataView(new ArrayBuffer(1));r[t(681)](0,De[t(494)]),de(r[t(735)]),n[t(761)](e)},n.onmouseleave=function(e){var t=ne,r=new DataView(new ArrayBuffer(1));r[t(681)](0,De.MouseLeave),de(r[t(735)]),n[t(455)](e)},function(e){var t=z;_.Z[t(863)](t(496));var n=[9,8,7,6,5,4,3,2,1,0],r={};function i(e){var i=t;_.Z[i(863)](i(431));var o=n.pop();void 0===o&&_.Z[i(667)](i(676)),r[e[i(626)]]=o}function o(e){var i=t;_.Z.func(i(628)),n[i(677)](r[e[i(626)]]),delete r[e[i(626)]]}function a(n,i){var o=t;_.Z[o(863)](o(858));var a=new DataView(new ArrayBuffer(2+6*i[o(524)]));a[o(681)](0,n),a[o(681)](1,i.length);for(var s=2,c=0;c<i[o(524)];c++){var u=i[c],l=u.clientX-e.offsetLeft,d=u[o(509)]-e[o(568)],f=Ae(l,d);a.setUint16(s,f.x,!0),s+=2,a[o(529)](s,f.y,!0),s+=2,a[o(681)](s,r[u[o(626)]],!0),s+=1,a[o(681)](s,255*u[o(425)],!0),s+=1}de(a[o(735)])}if(Ce.fakeMouseWithTouches){var s=void 0;e[t(757)]=function(n){var r=t;if(void 0===s){var i=n[r(583)][0];s={id:i[r(626)],x:i[r(747)]-Ie.left,y:i[r(509)]-Ie[r(618)]},e[r(822)](n),ze(Ne[r(666)],s.x,s.y)}n[r(518)]()},e.ontouchend=function(n){for(var r=t,i=0;i<n[r(583)][r(524)];i++){var o=n[r(583)][i];if(o.identifier===s.id){var a=o[r(747)]-Ie[r(837)],c=o[r(509)]-Ie.top;Ue(Ne[r(666)],a,c),e[r(469)](n),s=void 0;break}}n[r(518)]()},e[t(631)]=function(e){for(var n=t,r=0;r<e[n(773)][n(524)];r++){var i=e[n(773)][r];if(i[n(626)]===s.id){var o=i.clientX-Ie.left,a=i[n(509)]-Ie[n(618)];Be(o,a,o-s.x,a-s.y),s.x=o,s.y=a;break}}e[n(518)]()}}else e.ontouchstart=function(e){for(var n=t,r=0;r<e[n(583)].length;r++)i(e[n(583)][r]);a(De.TouchStart,e.changedTouches),e[n(518)]()},e[t(549)]=function(e){var n=t;a(De[n(567)],e[n(583)]);for(var r=0;r<e[n(583)][n(524)];r++)o(e[n(583)][r]);e[n(518)]()},e[t(631)]=function(e){var n=t;a(De[n(712)],e[n(773)]),e[n(518)]()}}(e);var n}(H[n(864)]),"ontouchstart"in document[n(646)]&&function(e){var t=z;_.Z[t(863)](t(726)),null===document[t(746)](t(749))&&((ee=document[t(623)](t(814))).id="hiddenInput",ee.maxLength=0,e[t(564)](ee)),null===document.getElementById(t(565))&&((X=document[t(623)](t(594))).id=t(565),X.innerHTML="edit text",e[t(564)](X),X[t(703)][t(540)]("hiddenState"),X[t(632)]("click",(function(){ee[t(510)]()})))}(e),function(){var e=z;H?(_.Z[e(667)](e(562)),ie(e(753)),H[e(755)]()):(_.Z.log("WebRTC player not setup, cannot create offer"),ie("Unable to setup video"))}(),H[n(864)]}var me,ve,ge,ye,be,xe,we=z(668),je={LockedMouse:0,HoveringMouse:1},Ce={controlScheme:je[z(457)],suppressBrowserKeys:!0,fakeMouseWithTouches:!1};function Se(){var e=z;_.Z[e(863)](e(770)),Y.valid&&(J[e(799)][e(413)]=e(710))}function Oe(){var e=z;_.Z[e(863)]("invalidateFreezeFrameOverlay"),J[e(799)].display=e(806),Y[e(627)]=!1}function Pe(){var e=z;if(_.Z[e(863)](e(815)),0!==Y.width&&0!==Y[e(599)]){var t=0,n=0,r=0,i=0,o=document[e(746)]("enlarge-display-to-fill-window-tgl");if(null!==o&&o.checked){var a=window[e(633)]/window[e(556)],s=Y.width/Y.height;a<s?(t=window[e(633)],n=Math[e(846)](window[e(633)]/s),r=Math[e(846)](.5*(window[e(556)]-n)),i=0):(t=Math[e(846)](window[e(556)]*s),n=window.innerHeight,r=0,i=Math[e(846)](.5*(window[e(633)]-t)))}else t=Y[e(476)],n=Y[e(599)],r=0,i=0;J[e(799)][e(476)]=t+"px",J[e(799)].height=n+"px",J[e(799)][e(837)]=i+"px",J.style[e(618)]=r+"px"}}function ke(e){var t=z;_.Z[t(863)](t(459));var n=document[t(746)]("player");if(n)if(Re(),n.classList.contains(t(427)))Te(n);else{var r=document[t(746)](t(828)),i=window[t(633)]<n[t(758)]||window[t(556)]<n.videoHeight;null!==r?r[t(491)]||i?function(e){var t=z;_.Z[t(863)](t(470));var n=e[t(818)](t(821)),r=window.innerHeight/window.innerWidth,i=e[t(468)]/e[t(527)],o=n[t(416)]/n[t(758)];isNaN(o)?(me=window[t(633)],ve=window[t(556)],ge=0,ye=0,e.style=t(437)+ge+t(861)+ye+t(723)+me+t(566)+ve+"px; cursor: "+we+"; "+be):r<i?(me=Math[t(846)](window[t(556)]/o),ve=window[t(556)],ge=0,ye=Math[t(846)](.5*(window.innerWidth-me)),e[t(799)]=t(437)+ge+t(861)+ye+t(723)+me+t(566)+ve+t(582)+we+"; "+be):(me=window[t(633)],ve=Math[t(846)](window[t(633)]*o),ge=Math.floor(.5*(window.innerHeight-ve)),ye=0,e[t(799)]=t(437)+ge+t(861)+ye+t(723)+me+"px; height: "+ve+"px; cursor: "+we+"; "+be)}(n):function(e){var t=z;_.Z.func(t(465));var n=e[t(818)](t(821));n[t(524)]>0&&(me=n[0].videoWidth,ve=n[0][t(416)],ge=Math[t(846)](.5*(window[t(556)]-ve)),ye=Math[t(846)](.5*(window[t(633)]-me)),e.style="top: "+ge+t(861)+ye+"px; width: "+me+t(566)+ve+"px; cursor: "+we+"; "+be)}(n):function(e){var t=z;_.Z[t(863)](t(586)),e.getElementsByTagName(t(821)),e[t(799)]=t(617)+me+t(566)+ve+t(582)+we+"; "+be}(n),Te(n)}}function Te(e){var t=z;_.Z[t(863)]("setupMouseAndFreezeFrame"),Ie=e[t(495)](),function(){var e=z;_.Z[e(863)](e(662));var t=document[e(746)](e(440)),n=t[e(818)](e(864));if(t&&n.length>0){var r=t.clientHeight/t.clientWidth,i=n[0][e(416)]/n[0].videoWidth;if(r>i){var o=r/i;Ae=function(n,r){var i=e,a=n/t[i(527)],s=o*(r/t[i(468)]-.5)+.5;return a<0||a>1||s<0||s>1?{inRange:!1,x:65535,y:65535}:{inRange:!0,x:65536*a,y:65536*s}},it=function(n,r){var i=e,a=(r/65536-.5)/o+.5;return{x:n/65536*t.clientWidth,y:a*t[i(468)]}},Le=function(n,r){var i=e;return{x:32767*(n/(.5*t[i(527)])),y:32767*(o*r/(.5*t[i(468)]))}}}else{var a=i/r;Ae=function(e,n){var r=a*(e/t.clientWidth-.5)+.5,i=n/t.clientHeight;return r<0||r>1||i<0||i>1?{inRange:!1,x:65535,y:65535}:{inRange:!0,x:65536*r,y:65536*i}},it=function(n,r){var i=r/65536;return{x:((n/65536-.5)/a+.5)*t[e(527)],y:i*t.clientHeight}},Le=function(n,r){var i=e;return{x:32767*(a*n/(.5*t[i(527)])),y:32767*(r/(.5*t[i(468)]))}}}}}(),Pe()}function Re(){var e=z;if(_.Z.func(e(630)),N)if((new Date)[e(534)]()-G>1e3){var t=document[e(746)](e(440));if(!t)return;var n={Console:"setres "+t[e(527)]+"x"+t[e(468)]};Ze(n),_.Z[e(667)](n),G=(new Date)[e(534)]()}else _.Z[e(667)](e(774)),clearTimeout(W),W=setTimeout(Re,1e3)}function Ee(e){var t=z;_.Z.func(t(803)),clearTimeout(xe),xe=setTimeout((function(){ke()}),500)}var De={IFrameRequest:0,RequestQualityControl:1,MaxFpsRequest:2,AverageBitrateRequest:3,StartStreaming:4,StopStreaming:5,LatencyTest:6,RequestInitialSettings:7,UIInteraction:50,Command:51,KeyDown:60,KeyUp:61,KeyPress:62,MouseEnter:70,MouseLeave:71,MouseDown:72,MouseUp:73,MouseMove:74,MouseWheel:75,TouchStart:80,TouchEnd:81,TouchMove:82};function _e(e,t){var n=z;_.Z.func(n(816));var r=JSON[n(734)](t),i=new DataView(new ArrayBuffer(3+2*r[n(524)])),o=0;i[n(681)](o,e),o++,i[n(529)](o,r.length,!0),o+=2;for(var a=0;a<r[n(524)];a++)i[n(529)](o,r[n(634)](a),!0),o+=2;de(i[n(735)])}function Ze(e){var t=z;_.Z[t(863)](t(569),e),_e(De.UIInteraction,e)}function Me(){var e=z;_.Z[e(863)](e(808)),de(new Uint8Array([De[e(859)]])[e(735)])}var Ie=void 0,Ae=void 0,Le=void 0;function Be(e,t,n,r){var i=z,o=Ae(e,t),a=Le(n,r),s=new DataView(new ArrayBuffer(9));s[i(681)](0,De[i(537)]),s.setUint16(1,o.x,!0),s[i(529)](3,o.y,!0),s[i(443)](5,a.x,!0),s[i(443)](7,a.y,!0),de(s[i(735)])}function ze(e,t,n){var r=z,i=Ae(t,n),o=new DataView(new ArrayBuffer(6));o.setUint8(0,De.MouseDown),o.setUint8(1,e),o[r(529)](2,i.x,!0),o[r(529)](4,i.y,!0),de(o[r(735)])}function Ue(e,t,n){var r=z,i=Ae(t,n),o=new DataView(new ArrayBuffer(6));o[r(681)](0,De[r(699)]),o[r(681)](1,e),o.setUint16(2,i.x,!0),o.setUint16(4,i.y,!0),de(o.buffer)}function Fe(e,t,n){var r=z,i=Ae(t,n),o=new DataView(new ArrayBuffer(7));o[r(681)](0,De.MouseWheel),o[r(443)](1,e,!0),o[r(529)](3,i.x,!0),o[r(529)](5,i.y,!0),de(o[r(735)])}var Ne={MainButton:0,AuxiliaryButton:1,SecondaryButton:2,FourthButton:3,FifthButton:4},We={PrimaryButton:1,SecondaryButton:2,AuxiliaryButton:4,FourthButton:8,FifthButton:16};function He(e,t,n){var r=z;e&We[r(605)]&&Ue(Ne.MainButton,t,n),e&We[r(750)]&&Ue(Ne[r(750)],t,n),e&We[r(433)]&&Ue(Ne.AuxiliaryButton,t,n),e&We.FourthButton&&Ue(Ne.FourthButton,t,n),e&We[r(508)]&&Ue(Ne.FifthButton,t,n)}function qe(e,t,n){var r=z;e&We[r(605)]&&ze(Ne[r(666)],t,n),e&We[r(750)]&&ze(Ne[r(750)],t,n),e&We[r(433)]&&ze(Ne[r(433)],t,n),e&We[r(584)]&&ze(Ne[r(584)],t,n),e&We[r(508)]&&ze(Ne[r(508)],t,n)}function Ve(e){var t=z,n=e[t(476)]/2,r=e[t(599)]/2;function i(){var n=t;document[n(732)]===e||document[n(548)]===e?(_.Z[n(667)]("Pointer locked"),document.addEventListener(n(836),o,!1)):(_.Z[n(667)](n(695)),document[n(856)](n(836),o,!1))}function o(e){var i=t;n+=e[i(700)],r+=e.movementY,n>me&&(n-=me),r>ve&&(r-=ve),n<0&&(n=me+n),r<0&&(r=ve-r),Be(n,r,e.movementX,e[i(614)])}e[t(682)]=e[t(682)]||e[t(602)],document[t(805)]=document.exitPointerLock||document[t(759)],e[t(613)]=function(){e[t(682)]()},document[t(632)](t(739),i,!1),document[t(632)](t(762),i,!1),e.onmousedown=function(e){ze(e[t(594)],n,r)},e[t(742)]=function(e){Ue(e[t(594)],n,r)},e[t(670)]=function(e){Fe(e[t(483)],n,r)},e[t(761)]=function(e){qe(e[t(458)],n,r)},e[t(455)]=function(e){He(e[t(458)],n,r)}}function Ge(e){var t=z;return _.Z[t(863)](t(403)),e>=112&&e<=123||9===e}var Ke={BackSpace:8,Shift:16,Control:17,Alt:18,RightShift:253,RightControl:254,RightAlt:255};function Je(e){var t=z;return e[t(857)]===Ke[t(661)]&&e[t(424)]===t(445)?Ke[t(748)]:e[t(857)]===Ke.Control&&"ControlRight"===e.code?Ke[t(776)]:e.keyCode===Ke.Alt&&e.code===t(544)?Ke[t(823)]:e.keyCode}function Qe(){var e=z;_.Z.func(e(499)),document[e(746)]("overlay")[e(703)].toggle(e(650))}function Ye(){var e=z;_.Z[e(863)](e(412));var t=document[e(746)](e(847));t&&(t[e(715)]=e(438));var n=document[e(746)](e(521));n&&(n.innerHTML="Not connected"),!q||V?(function(){var e=z,t=document[e(623)](e(688));t.id=e(807),t[e(738)]=e(658),re(e(642))}(),Oe(),Q=!0,ke()):Xe(),$e(0)}function $e(e){var t=z;_.Z.func(t(637));var n=document[t(746)](t(515));n&&(n[t(511)]="Kick ("+e+")")}function Xe(){var e=z;if(_.Z[e(863)]("connect"),window.WebSocket=window[e(838)]||window.MozWebSocket,window[e(838)]){var t=window.PixelStreamingConfig;(U=t?new WebSocket(ct[e(639)]):new WebSocket(window[e(640)][e(696)].replace(e(551),"ws://")[e(579)](e(542),"wss://")))[e(653)]=function(t){var n=e;_.Z.func(n(442)),_.Z[n(667)](n(528)+t[n(679)]);var r=JSON[n(717)](t.data);ct.ws[n(653)](r,t.data),r[n(765)]===n(721)?function(e){var t=z;_.Z[t(863)]("onConfig");var n=he(document.getElementById("player"),e);switch(ke(),Ce[t(741)]){case je.HoveringMouse:!function(e){var t=z;_.Z.func("registerHoveringMouseEvents"),we=ct[t(728)],e.onmousemove=function(e){var n=t;ct.events.mouseDownMove(),Be(e[n(714)],e[n(539)],e[n(700)],e.movementY),e[n(518)]()},e[t(557)]=function(e){var n=t;ct[n(625)][n(576)](!0),ze(e[n(594)],e[n(714)],e[n(539)]),e[n(518)]()},e[t(742)]=function(e){var n=t;ct[n(625)][n(576)](!1),Ue(e[n(594)],e[n(714)],e[n(539)]),e[n(518)]()},e[t(845)]=function(e){var n=t;Ue(e.button,e.offsetX,e[n(539)]),e[n(518)]()},t(670)in e?e.onmousewheel=function(e){var n=t;Fe(e[n(483)],e[n(714)],e[n(539)]),e[n(518)]()}:e[t(632)](t(771),(function(e){var n=t;Fe(-120*e[n(463)],e[n(714)],e[n(539)]),e[n(518)]()}),!1),e[t(761)]=function(e){var n=t;qe(e[n(458)],e[n(714)],e[n(539)])},e[t(455)]=function(e){He(e[t(458)],e.offsetX,e.offsetY)}}(n);break;case je[t(457)]:Ve(n);break;default:_.Z[t(667)]("ERROR: Unknown control scheme "+Ce[t(741)]),Ve(n)}}(r):r[n(765)]===n(671)?$e(r.count-1):"answer"===r[n(765)]?function(e){var t=z;_.Z[t(863)]("onWebRtcAnswer"),H[t(830)](e),H[t(512)]=function(e){var n=t;ct.onAggregatedStats(e);for(var r=new(Intl[n(472)])(window[n(629)].language,{maximumFractionDigits:0}),i=new Intl.NumberFormat(window[n(629)][n(795)],{maximumFractionDigits:0,minimumIntegerDigits:2}),o=(e[n(430)]-e.timestampStart)/1e3,a=[],s=[60,60],c=0;c<s[n(524)];c++)a[n(677)](o%s[c]),o/=s[c];a[n(677)](o);var u=a[0],l=Math[n(846)](a[1]),d=Math[n(846)]([a[2]]);nt="B",rt=e[n(408)]("bytesReceived")?e.bytesReceived:0;for(var f=["kB","MB","GB"],p=0;p<f[n(524)]&&!(rt<1e5);p++)rt/=1e3,nt=f[p];var h=document.getElementById(n(847)),m=function(e){var t=e,n=1,r=setInterval((function(){var e=ne;n-=.1,h[e(799)]=e(790)+Math[e(727)](2*(n-.5)),n<=.1&&(0==--t?clearInterval(r):n=1)}),100/e)};ct[n(417)](pe);var v="",g=n(543);pe>35?(g="red",m(2),v+='<div style="color: '+g+n(867)):pe>26&&(g=n(840),m(1),v+=n(737)+g+'">Spotty network connection</div>'),h.className=g+n(608),v+=n(450)+i[n(517)](d)+":"+i[n(517)](l)+":"+i.format(u)+n(826),v+=n(736)+(e[n(408)](n(560))&&e[n(560)]&&e[n(408)]("frameHeight")&&e[n(729)]?e[n(560)]+"x"+e[n(729)]:"Chrome only")+"</div>",v+=n(652)+nt+n(766)+r[n(517)](rt)+n(826),v+="<div>Frames Decoded: "+(e[n(408)](n(581))?r.format(e[n(581)]):"Chrome only")+n(826),v+=n(419)+(e[n(408)](n(702))?r[n(517)](e[n(702)]):"Chrome only")+n(826),v+='<div style="color: '+g+n(813)+(e[n(408)]("bitrate")?r.format(e.bitrate):n(590))+n(826),v+=n(785)+(e.hasOwnProperty(n(685))?r.format(e[n(685)]):n(590))+"</div>",v+="<div>Frames dropped: "+(e[n(408)](n(587))?r[n(517)](e[n(587)]):"Chrome only")+n(826),v+=n(835)+(e[n(408)]("currentRoundTripTime")?r[n(517)](1e3*e[n(574)]):n(597))+n(826),v+=n(436)+(e[n(408)](n(801))?r[n(517)](e[n(801)]):n(590))+n(826),v+='<div style="color: '+g+n(648)+pe+n(826),document[n(746)](n(521))[n(738)]=v},H[t(793)](1e3),H[t(480)][t(558)]=function(e){var n=t;if(_.Z.func(n(461)),e[n(593)]){var r=e.BrowserReceiptTimeMs-e.TestStartTimeMs,i=0==e[n(756)]||0==e[n(490)]?n(701):e[n(546)]-e[n(490)],o=e[n(690)]-e[n(490)],a=e[n(546)]-e[n(756)],s=e[n(656)]-e.UEReceiptTimeMs,c=r-s,u=r-c-s,l=null,d=null;e[n(421)]&&e[n(593)]&&(d=(l=e[n(421)]+r)-c-s);var f="";f+=n(819)+c+n(826),f+=n(719)+i+n(826),f+=n(484)+o+"</div>",f+=n(620)+a+n(826),f+=n(672)+s+n(826),f+=n(852)+u+n(826),f+=e[n(421)]&&e[n(593)]?n(456)+e.FrameDisplayDeltaTimeMs+n(826):"",f+=d?n(604)+d+n(826):"",f+=n(660)+r+n(826),f+=l?n(454)+l+n(826):"",document[n(746)]("LatencyStats")[n(738)]=f}}}(r):"iceCandidate"===r.type?function(e){var t=z;_.Z.func(t(831)),H&&H[t(606)](e)}(r[n(502)]):_.Z[n(667)](n(405)+r[n(765)])},U[e(850)]=function(t){var n=e;_.Z[n(863)](n(493)),_.Z[n(667)](n(860)+JSON.stringify(t)),ct.ws[n(850)](t[n(424)],t[n(607)])},U.onclose=function(t){var n=e;_.Z[n(863)](n(697)),ct.ws.onclose(t.code,t.reason),_.Z[n(667)](n(414)+JSON[n(734)](t[n(424)])+n(410)+t[n(607)]),U=void 0,V=!0;var r=document.getElementById(n(440));H&&(r[n(635)](H[n(864)]),H[n(716)](),H=void 0),ie(n(775)+t[n(607)]);setTimeout(Ye,4e3)}}else alert(e(657))}function et(){var e=z;_.Z[e(863)](e(519)),function(){var e=z;window[e(632)](e(479),ke,!0),window[e(632)]("orientationchange",Ee),document[e(746)]("overlayButton")[e(632)](e(788),Qe);var t=document[e(746)](e(828));null!==t&&(t.onchange=function(e){ke()}),null!==(F=document[e(746)](e(460)))&&(F[e(786)]=function(e){Me()});var n=document.getElementById(e(453));null!==n&&(n[e(613)]=function(t){var n=e,r=document[n(746)]("encoder-rate-control")[n(511)],i=1e3*document[n(746)]("encoder-target-bitrate-text").value,o=1e3*document[n(746)](n(422))[n(511)],a=document[n(746)](n(636))[n(511)],s=document.getElementById(n(526))[n(511)],c=document[n(746)]("encoder-filler-data-tgl")[n(491)]?1:0,u=document[n(746)](n(711)).value;Ze({Console:n(832)+r}),Ze({Console:n(853)+i>0?i:-1}),Ze({Console:n(406)+o>0?o:-1}),Ze({Console:n(797)+a}),Ze({Console:n(781)+s}),Ze({Console:n(764)+c}),Ze({Console:n(772)+u})});var r=document.getElementById(e(744));null!==r&&(r[e(613)]=function(t){var n=e,r=document[n(746)]("webrtc-degradation-pref")[n(511)],i=document[n(746)](n(722))[n(511)],o=1e3*document[n(746)](n(708))[n(511)],a=1e3*document[n(746)](n(825))[n(511)],s=document[n(746)]("webrtc-low-qp-text")[n(511)],c=document.getElementById(n(500))[n(511)];Ze({Console:n(647)+r}),Ze({Console:n(535)+i}),Ze({Console:n(810)+o}),Ze({Console:n(610)+a}),Ze({Console:n(573)+s}),Ze({Console:n(779)+c})});var i=document[e(746)]("show-fps-button");null!==i&&(i.onclick=function(e){Ze({Console:"stat fps"})});var o=document[e(746)](e(423));null!==o&&(o.onchange=function(t){N=o[e(491)]});var a=document.getElementById(e(538));null!==a&&(a[e(786)]=function(t){var n=e;document[n(746)](n(698))[n(799)][n(413)]=t[n(446)][n(491)]?"block":n(806)});var s=document[e(746)](e(515));s&&(s.onclick=function(t){var n=e;_.Z[n(667)](n(589)),U[n(820)](JSON[n(734)]({type:n(501)}))})}(),function(){var e=z;_.Z[e(863)](e(769)),(J=document.createElement(e(572))).id=e(720),J.style[e(413)]=e(806),J[e(799)][e(577)]=e(806),J[e(799)][e(678)]="absolute",J[e(799)].zIndex="30"}(),function(){var e=z;_.Z.func(e(482)),document.onkeydown=function(t){var n=e;de(new Uint8Array([De[n(643)],Je(t),t.repeat]).buffer),t[n(857)]===Ke[n(691)]&&document.onkeypress({charCode:Ke[n(691)]}),Ce.suppressBrowserKeys&&Ge(t[n(857)])&&t[n(518)]()},document[e(777)]=function(t){var n=e;de(new Uint8Array([De.KeyUp,Je(t)])[n(735)]),Ce[n(503)]&&Ge(t.keyCode)&&t[n(518)]()},document.onkeypress=function(t){var n=e,r=new DataView(new ArrayBuffer(3));r[n(681)](0,De.KeyPress),r[n(529)](1,t.charCode,!0),de(r[n(735)])}}(),Xe(),$e(0)}function tt(){var e=["mouse button ","toString","Connection to:","request","webrtc-min-bitrate-text","slice","block","encoder-multipass","TouchMove","alt","offsetX","className","close","parse",", repeat = ","<div>UE Capture+Encode (ms): ","freezeFrameOverlay","config","webrtc-max-fps-text","px; width: ","6612uvhaOU","warnTimeout","createOnScreenKeyboardHelpers","abs","cursor","frameHeight","VideoEncoderAvgQP","srcObject","pointerLockElement","webRtcPlayerObj.onVideoInitialised","stringify","buffer","<div>Video Resolution: ",'<div style="color: ',"innerHTML","pointerlockchange"," down at (","controlScheme","onmouseup","/images/Play.png","webrtc-params-submit","MultiPass","getElementById","clientX","RightShift","hiddenInput","SecondaryButton","credentials","MinQP","Starting connection to server, please wait","-> SS: stats\n","createOffer","UEPreEncodeTimeMs","ontouchstart","videoWidth","mozExitPointerLock","exit","pressMouseButtons","mozpointerlockchange","WebRTC","PixelStreaming.Encoder.EnableFillerData ","type","): ","encoder-target-bitrate-text","touch move","setupFreezeFrameOverlay","showFreezeFrameOverlay","DOMMouseScroll","PixelStreaming.Encoder.Multipass ","touches","Resizing too often - skipping","Disconnected: ","RightControl","onkeyup","warnTimer","PixelStreaming.WebRTC.HighQpThreshold ","LowQP","PixelStreaming.Encoder.MaxQP ","webRtcPlayerObj.onWebRtcCandidate","loadedTimes","cors","<div>Framerate: ","onchange","TargetBitrate","click","Start Streaming","opacity: ","emitCommand","mouse enter","aggregateStats","unrecognized data received, packet ID ","language","textDisplayState","PixelStreaming.Encoder.MinQP ","data:image/jpeg;base64,","style","localhost","receiveToCompositeMs","jpeg","onOrientationChange","://:","exitPointerLock","none","playButton","requestQualityControl","SetUETimings","PixelStreaming.WebRTC.MinBitrate ","ps.metaeditor.io","ws://",'">Bitrate (kbps): ',"input","resizeFreezeFrameOverlay","emitDescriptor","2LrZWgV","getElementsByTagName","<div>Net latency RTT (ms): ","send","VIDEO","onmouseenter","RightAlt","naturalWidth","webrtc-max-bitrate-text","</div>","webRtcPlayerObj.onDataChannelConnected","enlarge-display-to-fill-window-tgl","onConnect","receiveAnswer","onWebRtcIce","PixelStreaming.Encoder.RateControl ","size","N/A","<div>Net RTT (ms): ","mousemove","left","WebSocket","Actions not initialised","orange","1128345qrOMEq","QualityControlOwnership",", dX: ","key press ","oncontextmenu","floor","qualityStatus","key down ","repeat","onerror","9QmEvXs","<div>Browser send latency (ms): ","PixelStreaming.Encoder.TargetBitrate ","5125248oYfMMA","Can't parse callback","removeEventListener","keyCode","emitTouchData","RequestQualityControl","WS error: ","px; left: ","<center>No activity detected<br>Disconnecting in ","func","video","now","muted",'">Bad network connection</div>',"isKeyCodeBrowserKey","2967208AObMOd","invalid SS message type: ","PixelStreaming.Encoder.MaxBitrateVBR ","fakeMouseWithTouches","hasOwnProperty","POST"," - ","LatencyTest","start","display","WS closed: ","PixelStreamingConfig","videoHeight","setVideoQuality","Received quality controller message, will control quality: ","<div>Packets Lost: ","charCode","FrameDisplayDeltaTimeMs","encoder-max-bitrate-text","match-viewport-res-tgl","code","force","WebRTC connected, waiting for video","fixed-size","onUserCount","command","timestamp","rememberTouch","wss://","AuxiliaryButton","warn","closeTimeout","<div>Browser receive to composite (ms): ","top: ","grey-status","lastChild","player","DegradationPref","ws.onmessage","setInt16","onScreenKeyboard","ShiftRight","target","showFreezeFrame","active","onVideoInitialised","<div>Duration: ","grab","src","encoder-params-submit","<div>Total latency (ms): ","releaseMouseButtons","<div>Browser receive latency (ms): ","LockedMouse","buttons","resizePlayerStyle","quality-control-ownership-tgl","latencyTestTimings.latencyTestTimings.OnAllLatencyTimingsReady","> not executed, stream not loaded yet","detail","caller","resizePlayerStyleToActualSize","MaxBitrate","FreezeFrame","clientHeight","onmouseleave","resizePlayerStyleToFillWindow","handle_responses","NumberFormat","enabled","Encoder","onClose","width","mouse wheel with delta ","344272zZezcR","resize","latencyTestTimings","21860770QtwkDx","registerKeyboardEvents","wheelDelta","<div>UE Capture (ms): ","encoder-rate-control","afkOverlay","body","FillerData","MinBitrate","UEPreCaptureTimeMs","checked","This version of MetaEditor is not licensed. Please contact with support.","ws.onerror","MouseEnter","getBoundingClientRect","registerTouchEvents","key up ","status","onExpandOverlay_Click","webrtc-high-qp-text","kick","candidate","suppressBrowserKeys","json","application/json"," bytes) of freeze frame: ","webrtc-degradation-pref","FifthButton","clientY","focus","value","onAggregatedStats","Response","countdownTimer","kick-other-players-button","InitialSettings","format","preventDefault","load","setupWebRtcPlayer","stats","Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio","timestampStart","length","time","encoder-max-qp-text","clientWidth","<- SS: ","setUint16","received next chunk (","videoPlayOverlay","5454694DpPGLC","readyState","getTime","PixelStreaming.WebRTC.MaxFps ","Done!","MouseMove","show-stats-tgl","offsetY","add","callbacks","https://","lime","AltRight","iceCandidate","UEPostEncodeTimeMs","overlay","mozPointerLockElement","ontouchend","undefined","http://","interface","mouse_down","count","message","innerHeight","onmousedown","OnAllLatencyTimingsReady","remove","frameWidth","://","Creating offer","onclose","appendChild","editTextButton","px; height: ","TouchEnd","offsetTop","emitUIInteraction","protocol","webrtc-low-qp-text","img","PixelStreaming.WebRTC.LowQpThreshold ","currentRoundTripTime","listener","mouseDown","pointerEvents","onQuality","replace"," seconds<br>Click to continue<br></center>","framesDecoded","px; cursor: ","changedTouches","FourthButton","set","resizePlayerStyleToArbitrarySize","framesDropped","payload","-> SS: kick","Chrome only","ps_verification_id","play","BrowserReceiptTimeMs","button","touch start","error","Can't calculate","onload","height","onWebRtcOffer","initialised","mozRequestPointerLock","onLoad","<div>Total browser latency (ms): ","PrimaryButton","handleCandidateFromServer","reason","Status","hiddenState","PixelStreaming.WebRTC.MaxBitrate ","callback_key","decode","onclick","movementY","actions"," up at (","top: 0px; left: 0px; width: ","top","received bigger freeze frame than advertised: ","<div>UE Encode (ms): ","reduce","onDataChannelMessage","createElement","emit","events","identifier","valid","forgetTouch","navigator","updateVideoStreamSize","ontouchmove","addEventListener","innerWidth","charCodeAt","removeChild","encoder-min-qp-text","updateKickButton","Command","socketUrl","location","x: ","clickableState","KeyDown","RequestInitialSettings","then","documentElement","PixelStreaming.WebRTC.DegradationPreference ",'">Video Quantization Parameter: ',"onMouseMove","overlay-shown","autoPlay","<div>Received (","onmessage","2185OLccyX","removeResponseEventListener","UETransmissionTimeMs","Your browser doesn't support WebSocket","Click to start","HighQP","<div>Total latency (excluding browser) (ms): ","Shift","setupNormalizeAndQuantize","onWebRtcCandidate","playsinline","usersCount","MainButton","log","default","autoplay","onmousewheel","playerCount","<div>Total UE latency (ms): ","messageOverlay","showOnScreenKeyboard","countdown","exhausted touch indentifiers","push","position","data","reinit","setUint8","requestPointerLock","-> SS: offer:\n","utf-16","framerate","receiving","onDataChannelConnected","div","host","UEPostCaptureTimeMs","BackSpace","peerConnectionOptions","init","encoder-filler-data-tgl","The pointer lock status is now unlocked","href","ws.onclose","statsContainer","MouseUp","movementX","???","packetsLost","classList"];return(tt=function(){return e})()}var nt=null,rt=null,it=null,ot=new(function(e){function t(){(0,s.default)(this,t)}return(0,c.default)(t,[{key:"request",value:function(){var e=(0,l.Z)(p().mark((function e(t,n){var r,i,o,a=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.length>2&&void 0!==a[2]?a[2]:{},o={method:t,mode:(i=z)(784),headers:{"Content-Type":i(505)}};try{o[i(487)]=JSON[i(734)](r[i(487)])}catch(s){}return e.next=6,fetch(n,o)[i(645)](function(){var e=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i,e.prev=1,e.t0=t[n(498)],e.next=5,t[n(504)]();case 5:return e.t1=e.sent,e.abrupt("return",{status:e.t0,body:e.t1});case 9:return e.prev=9,e.t2=e.catch(1),e.abrupt("return",{status:t.status,error:e.t2});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}());case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=(0,l.Z)(p().mark((function e(t,n){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=z,e.next=3,this[r(707)](r(409),t,{body:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:e,value:function(){var e=(0,l.Z)(p().mark((function e(){var t,n,r,i,o,a,s,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"!==(t=z)(550)){e.next=3;break}return e.abrupt("return");case 3:n={hosts:[t(800),"127.0.0.1",t(811)],apiUrl:"https://api.unrealos.com/api/metaeditor/verify",message:t(492)},!1,r=L(n.hosts),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=15;break}if(o=i.value,!document[t(640)][t(696)].search(t(561)+o)){e.next=13;break}return!0,e.abrupt("break",15);case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),r.e(e.t0);case 20:return e.prev=20,r.f(),e.finish(20);case 23:({referer:document[t(640)][t(696)]}),a="*"[t(849)](100),s="\n".repeat(5),c=[s,a,n[t(555)],a,s].join("\n"),console[t(596)](c);case 25:case"end":return e.stop()}}),e,null,[[6,17,20,23]])})));return function(){return e.apply(this,arguments)}}()}]),t}(z(693))),at=function(e,t,n,r){(0,C.default)(o,e);var i=A(o);function o(){var e;(0,s.default)(this,o);for(var t=z,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=i.call.apply(i,[this].concat(r)),ot[t(693)](),e[t(721)]=Z,e.usersCount=0,e[t(601)]=!1,e[t(651)]=!0,e[t(783)]=0,e[t(728)]=t(451),e[t(547)]=!1,"object"!==t(550)&&(window.ps_funcs={sendStartLatencyTest:function(){return te()}}),e}return(0,c.default)(o,[{key:"callbacks",get:function(){var e=this,t=z;if("object"!==t(550)){var n=t(471),r=this[t(721)][t(611)];return{set:function(){var t,r;t=n,r=function(t){var n=ne;try{var r=JSON[n(717)](t),i={caller:"stream",type:r[n(765)]||null,verification_id:null,time:null,payload:{value:r.value||null},__str__:t};if("command_verification"===r[n(765)]){var o=r.id,a=r.time,s=r[n(588)],c=s.type,u=s.value;i[n(464)]=n(552),i[n(765)]=c,i[n(588)][n(511)]=u,i.verification_id=o,i[n(525)]=a}return i.type&&e.actions.onCallback(i),i}catch(l){throw new Error(n(855))}},K[z(585)](t,r)},remove:function(){var e,i=t;document[i(856)](r,(function(){}));try{e=n,K[z(559)](e)}catch(o){_.Z[i(596)](i(655),o)}}}}}},{key:"onVideoInitialised",value:function(){var e=z;_.Z[e(863)](e(575),"onVideoInitialised"),this.initialised||(H&&(H[e(864)][e(866)]=!0,H[e(864)][e(664)]=!0,this.autoPlay&&(H[e(864)][e(669)]=!0,H[e(864)][e(592)]())),ce(),ue())}},{key:"events",get:function(){var e=this;return{mouseDown:function(t){var n=ne;e.mouse_down=t,!t&&e[n(615)][n(649)](!1)},mouseDownMove:function(){e[ne(553)]&&e.actions.onMouseMove(!0)}}}},{key:"ws",get:function(){var e=this;return{onmessage:function(t,n){var r=ne;_.Z[r(596)]("onmessage",{msg:t,data:n}),t[r(765)]===r(671)&&(e[r(665)]=t[r(554)]-1,e[r(615)][r(428)](e[r(665)]))},onerror:function(t,n){var r=ne;_.Z[r(596)](r(850),{code:t,reason:n}),e[r(783)]=0,e[r(615)].onError({code:t,reason:n})},onclose:function(t,n){var r=ne;_.Z[r(596)](r(563),{code:t,reason:n}),e[r(783)]=0,e[r(615)][r(475)]({code:t,reason:n})}}}},{key:t,value:function(){var e=this,t=z;0===this.loadedTimes&&setTimeout((function(){var t=ne;e[t(615)][t(603)](window[t(415)]),e[t(601)]=!0,e.resize()}),1500),this[t(783)]+=1}},{key:"onAggregatedStats",value:function(e){var t=z;this[t(615)][t(512)](e),this[t(603)]()}},{key:n,value:function(e){var t=(0,u.Z)(e,2);t[0],t[1];z(842)}},{key:r,value:function(e){var t=z;this[t(615)][t(578)](e)}}]),o}(D,z(603),z(622),z(417)),st=function(e,t,n,r,i,o){(0,C.default)(u,e);var a=A(u);function u(){return(0,s.default)(this,u),a.call(this)}return(0,c.default)(u,[{key:t,value:function(e){var t=z;this[t(615)]=e,this[t(541)][t(585)](),this[t(412)](this[t(615)][t(751)])}},{key:n,value:function(){var e=z;this[e(615)]?this.start(this[e(615)][e(751)]):console[e(596)](e(839))}},{key:"socketUrl",get:function(){var e=z,t=window[e(415)],n=k()[e(717)](t[e(689)]),r=k().format({protocol:"https:"===n[e(570)]?e(432):e(812),host:n[e(689)],port:80!=t.port?t.port:void 0})[e(579)](e(804),"://");return _.Z[e(667)](e(706),r),r}},{key:r,value:function(){var e=z,t=this.autoPlay;this[e(651)]=!1,U.close(),V=!1,this[e(541)][e(559)](),this[e(601)]=!1,this[e(651)]=t}},{key:i,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.host,n=e.port,r=void 0===n?80:n,i=e.warnTimeout,o=void 0===i?120:i,a=e.closeTimeout,s=void 0===a?10:a,c=e.lockMouse,u=void 0!==c&&c,l=e.autoPlay,d=void 0===l||l,f=z;t&&(window.PixelStreamingConfig={host:t,port:r},_.Z[f(434)]("config",window[f(415)])),this.autoPlay=d,$=I(I({},$),{},{active:!0,warnTimeout:o,closeTimeout:s}),Ce[f(741)]=u?0:1,Ce[f(407)]=!0,Q=this[f(547)],q=this[f(651)],et(),this.actions[f(829)]()}},{key:o,value:function(e){var t,n,r=z;if(!this[r(601)]){var i,o="<"+e[r(765)]+r(462);return null!==(i=this[r(615)])&&void 0!==i&&i.onCommand(I(I({},e),{},{error:o})),void console[r(596)](o,e)}window[r(591)]=(null===(t=window)||void 0===t?void 0:t[r(591)])+1||0,e.verification_id=e[r(765)]+"="+window[r(591)],_.Z[r(434)](r(624),e),Ze(e),null===(n=this.actions)||void 0===n||n.onCommand(e)}}]),u}(at,z(693),z(680),z(760),z(412),z(624)),ct=new st;window[Z.app_key]=ct;var ut=ct;function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=j.defaultState,pt=function(){var e=h(),t=function(e,t){var n=o.useReducer(e,t),r=(0,u.Z)(n,2),i=r[0],a=r[1],s=o.useRef(i);return o.useEffect((function(){s.current=i}),[i]),[i,a,s]}(j.reducer,j.initialState),n=(0,u.Z)(t,3),r=n[0],i=n[1],a=n[2],f=function(e){return i({type:j.KEY.UPDATE,payload:e})},m=o.useState([]),g=(0,u.Z)(m,2),y=g[0],b=g[1],x=o.useState([]),w=(0,u.Z)(x,2),C=w[0],S=w[1];o.useEffect((function(){r.window_size.width===e.width&&r.window_size.height===e.height||(f({window_size:e}),ut.resize(r.resolution_multiplier))}),[e]);var O=o.useRef(null),P=function(e){var t=e.detail;"function"===typeof O.current&&O.current(t)},k=function(){f({body_clicked:!0}),null===a.current.volume&&f({volume:!0})};o.useEffect((function(){return document.addEventListener("ps_debug",P),document.body.addEventListener("click",k),function(){O.current=null,document.rem,document.body.removeEventListener("click",k)}}),[]);var T=new(function(){function e(){(0,s.default)(this,e),this.client=ut}return(0,c.default)(e,[{key:"commands",get:function(){return{clear:function(){return b([])},list:y}}},{key:"callbacks",get:function(){return{clear:function(){return S([])},list:C}}},{key:"init",value:function(e){var t=e.host,n=e.port,r=e.quality,i=e.onRestart,o=e.onCommand,a=e.onCallback,s=e.onLoad,c=e.onConnect,u=e.onError,h=e.onClose,m=e.onDebug;"number"===typeof r&&f({resolution_multiplier:r}),O.current=function(e){"function"===typeof m&&m(e)},this.client.init({onUserCount:function(e){f({users_count:e})},onCommand:function(e){console.warn("::onCommand"),e=dt({time:v().utc().format(),error:void 0},e),o(e),b((function(t){return[e].concat((0,d.Z)(t)).filter((function(e,t){return t<100}))}))},onCallback:function(e){e=dt(dt({},e),{},{time:v().utc().format()}),a(e),S((function(t){return[e].concat((0,d.Z)(t)).filter((function(e,t){return t<100}))}))},onLoad:function(e){console.warn("::onLoad"),f(dt(dt({},ft),{},{loaded:!0,connected:!0,stream_config:e})),s(e)},onConnect:function(){console.warn("::onConnect"),f(dt(dt({},ft),{},{connected:!0})),c()},onError:function(e){var t=e.code,n=e.reason;console.warn("::onError",{code:t,reason:n}),f({error:{code:t,reason:n},connected:!1}),u({code:t,reason:n})},onClose:function(){var e=(0,l.Z)(p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.code,r=t.reason,console.warn("::onClose",{code:n,reason:r}),f(dt(dt({},ft),{},{closed:{code:n,reason:r},loaded:!1,connected:!1})),4e3!==n){e.next=6;break}return e.next=6,i();case 6:h();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onMouseMove:function(e){f({mouse_moving:e})},onAggregatedStats:function(e){f({aggregated_stats:e})},onQuality:function(e){f({quality_speed:e})},credentials:{host:t,port:n,warnTimeout:120,closeTimeout:10,lockMouse:!1,autoPlay:!0}})}},{key:"__ws_locked__",get:function(){return(!r.loaded||!r.connected)&&(console.error("Can't perform action"),!0)}},{key:"changeQuality",value:function(e){this.__ws_locked__||(this.client.resize(e),f({resolution_multiplier:e}))}},{key:"changeVolume",value:function(){if(!this.__ws_locked__){var e=null===r.volume?null:!r.volume;null!==e&&(f({volume:e}),this.client.emit({type:"system_sound",value:e,verification_id:void 0}))}}},{key:"playStop",value:function(){if(r.loaded!==r.connected)return console.error("Can't perform action"),!1;!r.loaded?this.client.reinit():(this.client.exit(),f({loaded:!1,connected:!1}))}}]),e}());return{state:r,cls:T}},ht=n(5893),mt=o.createContext(),vt=function(){return o.useContext(mt)},gt=function(e){var t=pt();return(0,ht.jsx)(mt.Provider,{value:t,children:e.children})};var yt=function(e){return(0,ht.jsx)(gt,{children:e.children})},bt=n(5257),xt=new(function(){function e(){(0,s.default)(this,e),this.styled=function(e,t){return(0,bt.ZP)(e)(t())}}return(0,c.default)(e,[{key:"ul",value:function(e){return this.styled("ul",e)}},{key:"ol",value:function(e){return this.styled("ol",e)}},{key:"div",value:function(e){return this.styled("div",e)}},{key:"custom",value:function(e,t){return this.styled(e,t)}}]),e}()),wt=(new(function(){function e(){(0,s.default)(this,e)}return(0,c.default)(e,[{key:"makeRadius",value:function(){for(var e=10,t=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];"auto"===s&&(s=e),t.push(s)}return t.length>0?t.map((function(e){return e+"px"})).join(" "):e}}]),e}()),new(function(){function e(){(0,s.default)(this,e),this.min=function(e){return"@media (min-width: ".concat(e,"px)")},this.max=function(e){return"@media (max-width: ".concat(e,"px)")}}return(0,c.default)(e,[{key:"down",get:function(){return{xs:this.max(600),sm:this.max(900),md:this.max(1200),lg:this.max(1536)}}},{key:"up",get:function(){return{xs:this.min(0),sm:this.min(600),md:this.min(900),lg:this.min(1200),xl:this.max(1536)}}}]),e}()),xt.div((function(){return{'&[data-default="true"]':{position:"absolute",top:0,left:0,width:0,height:0,visibility:"hidden"},"& [data-list]":{padding:"5px 0",display:"flex",justifyContent:"space-between"},"& #stats, & #LatencyStats":{padding:10,backgroundColor:"rgba(0,0,0, .1)",borderRadius:10,"& > div":{padding:"3px 0",fontSize:12}}}}))),jt=xt.ul((function(e){return{display:"flex",alignItems:"center","& > li":{lineHeight:"1em"},'& > [data-li="label"]':{fontSize:30,"&.greyStatus":{color:"grey"},"&.limeStatus":{color:"green"},"&.orangeStatus":{color:"orange"},"&.redStatus":{color:"red"}}}})),Ct="ps-debug-root",St="ps-debug-children";function Ot(e){var t,n=function(e,t,n){return(0,ht.jsxs)("div",{children:[(0,ht.jsxs)("ul",{"data-list":!0,children:[(0,ht.jsx)("li",{children:e}),(0,ht.jsx)("li",{children:t})]}),n]})},r=e.isDefault?Ct:St;return e.isDefault&&null!==(t=document)&&void 0!==t&&t.getElementById(St)?(0,ht.jsx)("div",{}):(0,ht.jsxs)(wt,{id:r,"data-default":e.isDefault,children:[(0,ht.jsx)("div",{id:"overlay"}),n("Status",(0,ht.jsxs)(jt,{children:[(0,ht.jsx)("li",{"data-li":"label",id:"qualityStatus",children:"\u25cf"}),(0,ht.jsx)("li",{children:(0,ht.jsx)("button",{id:"overlayButton",children:"+"})})]})),n("Kick all other players",(0,ht.jsx)("input",{readOnly:!0,type:"button",id:"kick-other-players-button",value:"Kick"})),n("Enlarge Display to Fill Window",(0,ht.jsx)("input",{readOnly:!0,type:"checkbox",id:"enlarge-display-to-fill-window-tgl",checked:!0})),n("Quality control ownership",(0,ht.jsx)("input",{readOnly:!0,type:"checkbox",id:"quality-control-ownership-tgl"})),(0,ht.jsx)("h3",{children:"Encoder Settings"}),n("Rate Control",(0,ht.jsxs)("select",{id:"encoder-rate-control",defaultValue:"CBR",children:[(0,ht.jsx)("option",{value:"CBR",children:"CBR"}),(0,ht.jsx)("option",{value:"VBR",children:"VBR"}),(0,ht.jsx)("option",{value:"ConstQP",children:"ConstQP"})]})),n("Target Bitrate (kbps)",(0,ht.jsx)("input",{readOnly:!0,type:"number",id:"encoder-target-bitrate-text",value:"0",min:"0",max:"100000"})),n("Max Bitrate (kbps)",(0,ht.jsx)("input",{readOnly:!0,type:"number",id:"encoder-max-bitrate-text",value:"0",min:"0",max:"100000"})),n("Min QP",(0,ht.jsx)("input",{readOnly:!0,type:"number",id:"encoder-min-qp-text",value:"0",min:"0",max:"999"})),n("Max QP",(0,ht.jsx)("input",{readOnly:!0,type:"number",id:"encoder-max-qp-text",value:"0",min:"0",max:"999"})),n("Filler Data",(0,ht.jsx)("input",{readOnly:!0,type:"checkbox",id:"encoder-filler-data-tgl"})),n("Multipass",(0,ht.jsxs)("select",{id:"encoder-multipass",defaultValue:"DISABLED",children:[(0,ht.jsx)("option",{value:"DISABLED",children:"DISABLED"}),(0,ht.jsx)("option",{value:"QUARTER",children:"QUARTER"}),(0,ht.jsx)("option",{value:"FULL",children:"FULL"})]})),(0,ht.jsxs)("div",{id:"WebRTCSettings",children:[(0,ht.jsx)("h3",{children:"WebRTC Settings"}),n("Degradation Pref",(0,ht.jsxs)("select",{id:"webrtc-degradation-pref",children:[(0,ht.jsx)("option",{value:"BALANCED",children:"BALANCED"}),(0,ht.jsx)("option",{value:"MAINTAIN_FRAMERATE",children:"MAINTAIN_FRAMERATE"}),(0,ht.jsx)("option",{value:"MAINTAIN_RESOLUTION",children:"MAINTAIN_RESOLUTION"})]})),n("Max FPS",(0,ht.jsx)("input",{readOnly:!0,type:"number",id:"webrtc-max-fps-text",value:"1",min:"1",max:"999"})),n("Min Bitrate (kbps)",(0,ht.jsx)("input",{readOnly:!0,type:"number",id:"webrtc-min-bitrate-text",value:"0",min:"0",max:"100000"})),n("Max Bitrate (kbps)",(0,ht.jsx)("input",{readOnly:!0,type:"number",id:"webrtc-max-bitrate-text",value:"0",min:"0",max:"100000"})),n("Low QP Threshold",(0,ht.jsx)("input",{readOnly:!0,type:"number",id:"webrtc-low-qp-text",value:"0",min:"0",max:"999"})),n("High QP Threshold",(0,ht.jsx)("input",{readOnly:!0,type:"number",id:"webrtc-high-qp-text",value:"0",min:"0",max:"999"})),(0,ht.jsx)("input",{readOnly:!0,id:"webrtc-params-submit",type:"button",value:"Apply",style:{width:"100%"}})]}),(0,ht.jsx)("h3",{children:"Additional"}),n("Show FPS",(0,ht.jsx)("input",{readOnly:!0,type:"button",id:"show-fps-button",value:"Toggle"})),n("Match Viewport Resolution",(0,ht.jsx)("input",{readOnly:!0,type:"checkbox",id:"match-viewport-res-tgl"})),n("Show Stats",(0,ht.jsx)("input",{readOnly:!0,type:"checkbox",id:"show-stats-tgl",checked:!0}),(0,ht.jsx)("div",{id:"statsContainer",children:(0,ht.jsx)("div",{id:"stats"})})),n("Test Latency",(0,ht.jsx)("button",{onClick:function(){window.ps_funcs.sendStartLatencyTest()},children:"Test Latency"}),(0,ht.jsx)("div",{id:"LatencyStats"}))]})}Ot.defaultProps={isDefault:!1};var Pt=Ot;function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rt=xt.div((function(e){return{position:"absolute",top:0,left:0,right:0,bottom:0,height:"var(--window-height)",overflow:"hidden",'&[data-loaded="false"]':{pointerEvents:"none",visibility:"hidden"},"& > video":{height:"100%",width:"100%",objectFit:"cover",backgroundSize:"cover"}}})),Et=xt.div((function(e){return{position:"absolute",top:0,left:0,right:0,bottom:0,height:"var(--window-height)",overflow:"hidden",pointerEvents:"none",'& [data-click="true"], button, input, select, checkbox':{pointerEvents:"all"}}})),Dt=function(e){var t,n,r=o.useRef(null),i=o.useState(!1),a=(0,u.Z)(i,2),l=a[0],d=a[1],f=vt(),p=(null===f||void 0===f||null===(t=f.state)||void 0===t?void 0:t.loaded)||!1,h=(null===f||void 0===f||null===(n=f.state)||void 0===n||n.connected,o.useState(!0)),m=(0,u.Z)(h,2),v=(m[0],m[1]);o.useEffect((function(){document.getElementById("playerUI")||v(!1),d(!0)}),[]),o.useEffect((function(){"string"===typeof e.host&&r.current!==e.host&&e.autoConnect&&setTimeout((function(){return y.initConnection()}),1e3),r.current=e.host}),[e.host]);var g=new(function(){function e(){(0,s.default)(this,e)}return(0,c.default)(e,[{key:"emit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.value,r=e.verification_id,i=void 0===r?void 0:r;f.cls.client.emit({type:t,value:n,verification_id:i})}}]),e}()),y=new(function(){function t(){var e=this;(0,s.default)(this,t),window.ps_init=function(){return e.initConnection()}}return(0,c.default)(t,[{key:"cls",get:function(){return f.cls}},{key:"state",get:function(){return f.state}},{key:"initConnection",value:function(){e.host&&e.port?f.cls.init({host:e.host,port:e.port,onLoad:e.onLoad,onConnect:e.onConnect,onRestart:e.onRestart,onError:e.onError,onClose:e.onClose,onCommand:e.onCommand,onCallback:e.onCallback,onDebug:e.onDebug,quality:e.quality}):console.error("Stream server not found")}}]),t}());return o.useImperativeHandle(e.innerRef,(function(){return g})),!1===l?(0,ht.jsx)("div",{}):(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)(Rt,{"data-loaded":p,id:"player"}),(0,ht.jsxs)(Et,{children:[(0,ht.jsx)(Pt,{isDefault:!0}),e.children(y)]})]})};Dt.defaultProps={children:function(){},onLoad:function(){},onConnect:function(){},onRestart:function(){},onError:function(){},onClose:function(){},onCommand:function(){},onCallback:function(){},onDebug:function(){},onProgress:function(){},host:void 0,port:80,autoConnect:!0,isDev:!1,quality:1};var _t,Zt=o.forwardRef((function(e,t){return(0,ht.jsx)(yt,{children:(0,ht.jsx)(Dt,Tt(Tt({},e),{},{innerRef:t}))})})),Mt=n(266);function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lt=(_t={auto_connect:!1,loaded:!1,status:void 0,host:void 0,port:void 0,entry_id:void 0},(0,r.Z)(_t,"host",void 0),(0,r.Z)(_t,"port",void 0),(0,r.Z)(_t,"que",void 0),(0,r.Z)(_t,"seconds_to_kill",void 0),(0,r.Z)(_t,"seconds_to_start",void 0),_t),Bt={UPDATE:"UPDATE"};var zt={initialState:Lt,KEY:Bt,reducer:function(e,t){var n=t.type,r=t.payload;return n===Bt.UPDATE?At(At({},e),r):e}},Ut=function(){var e=o.useRef(null),t=o.useRef(null),n=o.useReducer(zt.reducer,zt.initialState),r=(0,u.Z)(n,2),i=r[0],a=r[1],d=function(e){return a({type:zt.KEY.UPDATE,payload:e})};o.useEffect((function(){return function(){f()}}),[]);var f=function(){clearInterval(e.current),clearInterval(t.current)},h=new(function(){function n(){(0,s.default)(this,n),this.MIN_SECONDS_TO_KILL=100,this.state=i}return(0,c.default)(n,[{key:"request",get:function(){var e="https://unrealos.com/api/streamsweb/access/".concat("car-2","/");return{delete:function(){var t=(0,l.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Mt.Request.DELETE(e));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),get:function(){var t=(0,l.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Mt.Request.GET(e));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}},{key:"initConnection",value:function(){window.ps_init()}},{key:"handleConnection",value:function(e){var t=e.host,n=e.port;t&&d({host:t}),n&&d({port:n})}},{key:"manualConnection",value:function(e){var t=e.host,n=e.port;d({loaded:!0,status:"localhost",host:t,port:n})}},{key:"onRequestStream",value:function(){var t=(0,l.Z)(p().mark((function t(){var n,r=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(),d({auto_connect:!0}),n=function(){var t=(0,l.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.request.get().then((function(t){var n;200===t.status&&(d(t.body),"active"===(null===(n=t.body)||void 0===n?void 0:n.status)&&(clearInterval(e.current),r.onTimeToKill()))})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=5,n();case 5:d({loaded:!0}),e.current=setInterval((function(){return n()}),3e3);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"onRestartStream",value:function(){var e=(0,l.Z)(p().mark((function e(){var t=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.delete().then((function(e){document.location.reload()})).catch((function(e){console.log(e),t.onRestartStream()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onTimeToKill",value:function(){var e=(0,l.Z)(p().mark((function e(){var n,r=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(t.current),n=function(){var e=(0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request.get().then((function(e){d(e)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.current=setInterval(n,1e4);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}());return h},Ft=o.createContext(),Nt=function(){return o.useContext(Ft)},Wt=function(e){var t=Ut();return(0,ht.jsx)(Ft.Provider,{value:t,children:e.children})},Ht=n(5107);function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt={UPDATE:"UPDATE"};var Kt={},Jt=function(e,t){var n=t.type,r=t.payload;return n===Gt.UPDATE?Vt(Vt({},e),r):e},Qt=function(){var e=vt(),t=o.useReducer(Jt,Kt),n=(0,u.Z)(t,2),r=(n[0],n[1],new(function(){function t(){(0,s.default)(this,t)}return(0,c.default)(t,[{key:"_emit",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;e.cls.client.emit({type:t,value:n,verification_id:r})}},{key:"testCommand",value:function(e){this._emit("test_command",e)}}]),t}()));return new(function(){function t(){(0,s.default)(this,t)}return(0,c.default)(t,[{key:"state",get:function(){return e.state}},{key:"cls",get:function(){return e.cls}},{key:"cmd",get:function(){return r}}]),t}())},Yt=o.createContext(),$t=function(){return o.useContext(Yt)},Xt=function(e){var t=Qt();return(0,ht.jsx)(Yt.Provider,{value:t,children:e.children})};function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nn={UPDATE:"UPDATE",COMPONENT:"COMPONENT"};var rn={current_menu:"about",components:{streamDrawer:{active:!1,slug:!1},draggableCard:{active:!1,data:!1}},ui_visible:!0},on=nn,an=function(e,t){var n=t.type,i=t.payload;if(n===nn.UPDATE)return tn(tn({},e),i);if(n===nn.COMPONENT){var o=Object.keys(i)[0],a=(0,r.Z)({},o,tn(tn({},e.components[o]),i[o]));return e.components=tn(tn({},e.components),a),tn({},e)}return e},sn=n(8401),cn=function(){var e=$t(),t=o.useReducer(an,rn),n=(0,u.Z)(t,2),i=n[0],l=n[1],d=(0,sn.useSound)(a.env.staticPath("sounds","mouse_click.mp3")),f=function(e){return l({type:on.UPDATE,payload:e})},p=function(e,t){return l({type:on.COMPONENT,payload:(0,r.Z)({},e,t)})};return new(function(){function t(){(0,s.default)(this,t)}return(0,c.default)(t,[{key:"state",get:function(){return i}},{key:"sounds",get:function(){return{click:function(){return t=d,void(e.state.volume&&t.play());var t}}}},{key:"handleMenu",value:function(e){this.sounds.click(),this.draggableCard.close(),this.handleDrawer.close(),e=i.current_menu!==e&&e,f({current_menu:e,ui_visible:!0})}},{key:"handleUiVisible",value:function(){this.sounds.click(),this.draggableCard.close(),f({ui_visible:!i.ui_visible})}},{key:"handleDrawer",get:function(){var e=this;return{open:function(t){e.sounds.click(),p("streamDrawer",{slug:!1,active:!1}),setTimeout((function(){return p("streamDrawer",{slug:t,active:!0})}),300)},close:function(){e.sounds.click(),p("streamDrawer",{slug:!1,active:!1})}}}},{key:"draggableCard",get:function(){var e=this;return{data:i.components.draggableCard.data,active:i.components.draggableCard.active,close:function(){e.sounds.click(),p("draggableCard",{active:!1})},open:function(t,n){e.sounds.click(),p("draggableCard",{active:!1}),setTimeout((function(){return p("draggableCard",{active:!0,data:{title:t,body:n}})}),300)}}}}]),t}())},un=o.createContext(),ln=function(){return o.useContext(un)},dn=function(e){var t=cn();return(0,ht.jsx)(un.Provider,{value:t,children:e.children})};var fn=function(e){return(0,ht.jsx)(Xt,{children:(0,ht.jsx)(dn,{children:e.children})})},pn=n(5697),hn=n.n(pn);function mn(e){var t=o.useRef(null),n=o.useState(0),r=(0,u.Z)(n,2),i=r[0],a=r[1],l=o.useState(!1),d=(0,u.Z)(l,2),f=d[0],p=d[1];o.useEffect((function(){return function(){m.stop()}}),[]),o.useEffect((function(){e.seconds<=0?m.stop():m.start()}),[e.seconds]),o.useEffect((function(){e.onProgress({percentage:i})}),[i]);var h=function(){if(e.seconds){var n=v()().add(e.seconds,"seconds");clearInterval(t.current),t.current=setInterval((function(){var r,i,o=e.seconds,s=v().duration(n.diff(v()())).asSeconds(),c=(r=o,i=s,Math.round((r-i)/r*100));if(c>=100)return clearInterval(t.current),void a(100);a(c)}),100)}},m=new(function(){function e(){(0,s.default)(this,e)}return(0,c.default)(e,[{key:"value",get:function(){return i}},{key:"stop",value:function(){clearInterval(t.current),a(100),p(!1)}},{key:"start",value:function(){f||(clearInterval(t.current),a(0),p(!0),h())}}]),e}());return m}mn.propTypes={seconds:hn().number.isRequired,onProgress:hn().func.isRequired,disabled:hn().bool.isRequired},mn.defaultProps={seconds:void 0,onProgress:function(){},disabled:!1};var vn=mn,gn=n(5861),yn=n(7357),bn=n(8456),xn=n(1458),wn=Ht.styled.custom(xn.Z,(function(e){return{height:1}}));var jn=function(){var e=$t(),t=Nt().state.seconds_to_start,n=vn({seconds:t,onProgress:function(e){}});return o.useEffect((function(){e.state.loaded&&n.stop()}),[e.state.loaded]),e.state.loaded||e.state.connected&&e.state.loaded?(0,ht.jsx)("div",{}):(0,ht.jsx)(wn,{variant:"determinate",value:n.value,color:"inherit"})},Cn=a.env.staticUrl("videos","intro.mp4"),Sn=a.env.staticUrl("player","logo_ue.svg"),On=Ht.styled.div((function(e){return{paddingBottom:e.spacing(4),"& > img":{maxWidth:100}}})),Pn=Ht.styled.custom(yn.Z,(function(e){return{top:0,right:0,left:0,bottom:0,height:"var(--window-height)",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}})),kn=Ht.styled.custom(yn.Z,(function(e){return{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",position:"relative","& > [data-progress]":(0,r.Z)({width:"20vw"},e.breakpoints.down("sm"),{width:"50vw"})}})),Tn=Ht.styled.div((function(e){return{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",backgroundColor:"rgba(0,0,0, 1)","& > video":(0,r.Z)({width:"100%",height:"100%",objectFit:"cover",opacity:.4,position:"absolute",overflow:"hidden",alignItems:"center",justifyContent:"center"},"objectFit","cover")}}));var Rn=function(){var e=$t(),t=Nt().state.seconds_to_start,n=vn({seconds:t,onProgress:function(e){}});return o.useEffect((function(){e.state.loaded&&n.stop()}),[e.state.loaded]),e.state.loaded?(0,ht.jsx)("div",{}):(0,ht.jsx)(Pn,{sx:{flexGrow:1},children:function(){if(e.state.connected&&e.state.loaded)return(0,ht.jsx)("div",{});return(0,ht.jsxs)("div",{children:[(0,ht.jsx)(Tn,{children:(0,ht.jsx)("video",{loop:!0,autoPlay:!0,muted:!0,children:(0,ht.jsx)("source",{src:Cn,type:"video/mp4"})})}),0===n.value||n.value>=100?(0,ht.jsx)(bn.Z,{color:"inherit",size:30}):(0,ht.jsxs)(kn,{children:[(0,ht.jsx)(On,{children:(0,ht.jsx)("img",{src:Sn})}),(0,ht.jsx)("div",{"data-progress":!0,children:(0,ht.jsx)(jn,{})}),(0,ht.jsx)(gn.Z,{variant:"body1",sx:{mt:3},children:"Loading 3D"})]})]})}()})};function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _n=Ht.styled.custom(yn.Z,(function(e){return{position:"absolute",top:0,left:0,right:0,zIndex:e.zIndex.modal+1}})),Zn=Ht.styled.custom(xn.Z,(function(e){return{}}));function Mn(e){var t=$t(),n=o.useRef(null),r=o.useState(0),i=(0,u.Z)(r,2),a=i[0],s=i[1],c=t.state.loaded;o.useEffect((function(){return function(){d()}}),[]),o.useImperativeHandle(e.innerRef,(function(){return{onShow:function(e){l(e)},onClose:function(){d()}}}));var l=function(e){c&&!["console_command"].includes(null===e||void 0===e?void 0:e.type)&&(d(),n.current=setInterval((function(){s((function(e){if(100===e)return clearInterval(n.current),0;var t=10*Math.random();return Math.min(e+t,100)}))}),500))},d=function(){clearInterval(n.current),s(0)};return a<=0||a>=100?(0,ht.jsx)("div",{}):(0,ht.jsx)(_n,{children:(0,ht.jsx)(Zn,{variant:"determinate",color:"inherit",value:a})})}var In=o.forwardRef((function(e,t){return(0,ht.jsx)(Mn,Dn(Dn({},e),{},{innerRef:t}))})),An=(0,Ht.makeStyles)((function(e){return{"@global":{"@keyframes click_ripple":{from:{opacity:1},to:{transform:"scale(10)",opacity:0}}},wave:{pointerEvents:"none",position:"absolute",animation:"click_ripple .5s linear forwards",borderRadius:"50%",width:4,height:4,marginLeft:-2,marginTop:-2,backgroundColor:"rgba(255,255,255, 1)"}}}));var Ln=function(e){var t=$t(),n=An(),r=o.useRef(null),i=o.useState(!1),a=(0,u.Z)(i,2),s=a[0],c=a[1],l=o.useState({pageX:0,pageY:0}),d=(0,u.Z)(l,2),f=d[0],p=d[1],h=t.state.loaded,m=o.useCallback((function(e){if(1===e.which&&"streamingVideo"===e.target.id){var t=e.pageX,n=e.pageY;p({pageX:t,pageY:n}),c(!0),clearTimeout(r.current),r.current=setTimeout((function(){return c(!1)}),500)}}),[]),v=function(){clearTimeout(r.current),window.removeEventListener("mousedown",m)};return o.useEffect((function(){return function(){v()}}),[]),o.useEffect((function(){h?window.addEventListener("mousedown",m):v()}),[h]),(0,ht.jsx)("div",{children:s&&(0,ht.jsx)("div",{className:n.wave,style:{top:f.pageY,left:f.pageX}})})},Bn=n(7564);function zn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fn=Ht.styled.ul((function(e){return{position:"relative",margin:e.spacing(2),width:90,height:60,display:"flex",alignItems:"flex-start",justifyContent:"center","& > li":{border:"solid 1px ".concat(e.palette.divider),width:24,height:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",textTransform:"uppercase",fontSize:e.typography.body2.fontSize,overflow:"hidden",transition:e.transitions.create(["border-color","background-color"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),'&[data-active="true"]':{backgroundColor:e.palette.divider,borderColor:"rgba(255,255,255, .4)","& > [data-icon]":{display:"block"},"& > label":{display:"none"}},"& > [data-icon]":{display:"none"},"&:nth-child(1)":{flexDirection:"column",marginTop:0,marginLeft:0},"&:nth-child(2)":{flexDirection:"column-reverse",marginTop:30,marginLeft:0},"&:nth-child(3)":{marginTop:30,marginLeft:-60},"&:nth-child(4)":{flexDirection:"row-reverse",marginTop:30,marginLeft:60}}}})),Nn=null;var Wn=function(){var e=$t(),t=(0,sn.useDevice)(),n=t.isBrowser,r=t.isMobile,i=o.useState(null),a=(0,u.Z)(i,2),s=a[0],c=a[1],l=o.useState(!1),d=(0,u.Z)(l,2),f=(d[0],d[1]),p=e.state.loaded;o.useEffect((function(){n&&s&&(clearTimeout(Nn),Nn=setTimeout((function(){c(null)}),1e3))}),[s]);var h,m={up:["w","keyboard_arrow_up"],down:["s","keyboard_arrow_down"],left:["a","keyboard_arrow_left"],right:["d","keyboard_arrow_right"]},v=[[["up","right"],["w","d"]],[["up","left"],["w","a"]],[["bottom","right"],["s","d"]],[["bottom","left"],["s","a"]]].map((function(e){return e[1]=[e[1].join("+"),e[1].reverse().join("+")],e})),g=Object.entries(m).map((function(e){var t=(0,u.Z)(e,2);t[0];return t[1][0]})),y=Object.entries(m).map((function(e){var t=(0,u.Z)(e,2),n=t[0];t[1];return n})),b=Object.entries(m).map((function(e){var t=(0,u.Z)(e,2),n=t[0],r=(0,u.Z)(t[1],2);return{name:n,key:r[0],icon:r[1]}})),x=zn(g);try{var w=function(){var e=h.value;(0,sn.useHotkeys)(e,(function(t,n){c(e),f(!1)}),[]),(0,sn.useHotkeys)("Shift+".concat(e),(function(t,n){c(e),f(!1)}),[])};for(x.s();!(h=x.n()).done;)w()}catch(E){x.e(E)}finally{x.f()}var j,C=zn(v);try{for(C.s();!(j=C.n()).done;){var S,O=zn(j.value[1]);try{var P=function(){var e=S.value;(0,sn.useHotkeys)(e,(function(t,n){c(e),f(!1)}),[]),(0,sn.useHotkeys)("Shift+".concat(e),(function(t,n){c(e),f(!1)}),[])};for(O.s();!(S=O.n()).done;)P()}catch(E){O.e(E)}finally{O.f()}}}catch(E){C.e(E)}finally{C.f()}var k,T=zn(y);try{var R=function(){var e=k.value;(0,sn.useHotkeys)(e,(function(t,n){c(e),f(!0)}),[])};for(T.s();!(k=T.n()).done;)R()}catch(E){T.e(E)}finally{T.f()}return!p||r?(0,ht.jsx)("div",{}):(0,ht.jsx)(Fn,{children:b.map((function(e,t){return(0,ht.jsxs)("li",{"data-active":(null===s||void 0===s?void 0:s.length)<=3&&(null===s||void 0===s?void 0:s.includes(e.key))||e.name===s,children:[(0,ht.jsx)(Bn.Z,{"data-icon":!0,children:e.icon}),(0,ht.jsx)("label",{children:e.key})]},t)}))})},Hn=n(2293),qn=n(155),Vn=n(3946),Gn=n(3375),Kn=n(9334),Jn=n(7594),Qn=n(3984),Yn=n(4178),$n=n(1057),Xn=n(1194),er=n(6886),tr=n(657),nr=n(1425),rr=n(6514),ir=n(8951),or=n(7645),ar=["children","onClose","closeIcon"],sr=["buttonConfirm","defaultOpen"];function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lr=Ht.styled.custom(tr.Z,(function(e){return{"& .MuiPaper-root":{},"& .MuiDialogContent-root":{padding:e.spacing(3)},"& .MuiDialogActions-root":{},"& .MuiDialogTitle-root":{padding:e.spacing(2,3)}}})),dr=Ht.styled.custom(or.Z,(function(e){return{borderBottom:"solid 1px ".concat(e.palette.divider),"& > button":{position:"absolute",right:e.spacing(1.2),top:e.spacing(1.2)}}})),fr=Ht.styled.custom(rr.Z,(function(e){return{padding:e.spacing(4),marginTop:e.spacing(2)}})),pr=Ht.styled.custom(ir.Z,(function(e){return{paddingBottom:e.spacing(3)}})),hr=Ht.styled.custom(nr.Z,(function(e){return{padding:e.spacing(4),'&[data-variant="actions"]':{padding:e.spacing(3,4),borderTop:"solid 1px ".concat(e.palette.divider)}}})),mr=function(e){var t=e.children,n=e.onClose,r=e.closeIcon,o=(0,i.Z)(e,ar);return r?(0,ht.jsxs)(dr,ur(ur({sx:{m:0,p:2}},o),{},{children:[t,n?(0,ht.jsx)(Vn.Z,{onClick:n,sx:{color:function(e){return e.palette.grey[500]}},children:(0,ht.jsx)(Bn.Z,{children:"close"})}):null]})):(0,ht.jsx)(dr,ur(ur({},o),{},{children:t}))};function vr(e){var t=e.buttonConfirm,n=e.defaultOpen,r=(0,i.Z)(e,sr),a=o.useState(n),s=(0,u.Z)(a,2),c=s[0],d=s[1];o.useImperativeHandle(r.innerRef,(function(){return{open:function(){h()},close:function(){m()}}}));var f,h=function(){d(!0)},m=function(){d(!1),r.onClose()};return r.closeIcon&&(f="icon"),r.showActions&&(f="actions"),(0,ht.jsx)("div",{children:(0,ht.jsxs)(lr,{open:c,onClose:m,fullWidth:!0,maxWidth:r.maxWidth,children:[(0,ht.jsx)(mr,{onClose:m,closeIcon:r.closeIcon,children:r.title}),(0,ht.jsxs)(fr,{children:[r.subtitle?(0,ht.jsx)(pr,{children:r.subtitle}):"",r.children]}),r.showActions&&(0,ht.jsxs)(hr,{"data-variant":f,children:[(0,ht.jsx)($n.Z,{onClick:m,children:"Cancel"}),(0,ht.jsx)($n.Z,{color:t.color,disabled:t.disabled,variant:"contained",onClick:(0,l.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onClick();case 2:if("boolean"!==typeof(n=e.sent)||!1!==n){e.next=5;break}return e.abrupt("return");case 5:m();case 6:case"end":return e.stop()}}),e)}))),children:t.label})]})]})})}vr.defaultProps={defaultOpen:!1,showActions:!0,closeIcon:!0,onClose:function(){},buttonConfirm:{label:"Confirm",onClick:function(){},color:"primary",disabled:!1},maxWidth:"sm"};var gr=o.forwardRef((function(e,t){return(0,ht.jsx)(vr,ur(ur({},e),{},{innerRef:t}))}));function yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xr="DEV_SERVER_DATA";function wr(e){var t=$t(),n=Nt(),i=o.useRef(null),a=(0,sn.useStorage)();o.useImperativeHandle(e.innerRef,(function(){return{open:function(){i.current.open()}}})),o.useEffect((function(){if(!n.state.auto_connect){i.current.open();var e=a.getItem(xr),t={host:e.host,port:e.port};n.manualConnection(t)}}),[]),o.useEffect((function(){n.state.autoConnect||a.setItem(xr,n.state)}),[n.state]),o.useEffect((function(){n.state.autoConnect||t.state.loaded&&i.current.close()}),[t.state.loaded]);var s=function(e){return function(t){var i=t.target.value;n.handleConnection((0,r.Z)({},e,i))}};return(0,ht.jsx)("div",{children:(0,ht.jsx)(gr,{ref:i,title:"Development: Connection form",subtitle:"Run STUN and TURN Servers and a project with Unreal Engine.",closeIcon:!1,showActions:!1,children:(0,ht.jsx)("div",{children:function(){var e=t.state.connected;return(0,ht.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),n.initConnection()},children:[(0,ht.jsx)(yn.Z,{sx:{flexGrow:1,pt:2,pb:3},children:(0,ht.jsxs)(er.ZP,{container:!0,spacing:2,children:[(0,ht.jsx)(er.ZP,{item:!0,xs:8,children:(0,ht.jsx)(Xn.Z,{disabled:e,autoFocus:!0,fullWidth:!0,label:"Host",type:"url",placeholder:"http://127.0.0.1",value:n.state.host,onChange:s("host"),helperText:(0,ht.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),e.stopPropagation(),n.handleConnection({host:"http://127.0.0.1",port:80})},children:"Set default: http://127.0.0.1:80"})})}),(0,ht.jsx)(er.ZP,{item:!0,xs:4,children:(0,ht.jsx)(Xn.Z,{disabled:e,fullWidth:!0,label:"Port",type:"number",placeholder:"80",value:n.state.port,onChange:s("port")})})]})}),(0,ht.jsx)($n.Z,{disabled:e,fullWidth:!0,type:"submit",size:"large",variant:"contained",children:"Connect"})]})}()})})})}var jr=o.forwardRef((function(e,t){return(0,ht.jsx)(wr,br(br({},e),{},{innerRef:t}))})),Cr=Ht.styled.custom(Hn.Z,(function(e){return{borderRadius:e.shape.borderRadius,width:"max-content"}})),Sr=function(e){var t,n=$t(),r=(Nt(),n.state),i=n.cls,a=o.useState(null),s=(0,u.Z)(a,2),c=(s[0],s[1]),l=o.useState(null),d=(0,u.Z)(l,2),f=d[0],p=d[1],h=[["Play/Stop",r.loaded?"pause":"play_arrow",function(){i.playStop()}],["Data state","info",function(){return e.handleMenu("state")}],["Debug data","tune",function(){return e.handleMenu("debug")}],["Logs","notifications",function(){return e.handleMenu("logs")}],["Commands","flag",function(){return e.handleMenu("commands")}],["Connection","vpn_key",function(){return e.handleMenu("connection")}]].map((function(e){var t=(0,u.Z)(e,3);return{label:t[0],icon:t[1],onClick:t[2]}})),m=function(){p(null)};return(0,ht.jsxs)(Cr,{position:"static",children:[(0,ht.jsxs)(qn.Z,{disableGutters:!0,variant:"dense",sx:{px:1},children:[(0,ht.jsx)(gn.Z,{variant:"h6",noWrap:!0,component:"div",sx:{mx:2},children:"DEV"}),(0,ht.jsx)(yn.Z,{sx:{flexGrow:1,display:{xs:"none",sm:"flex"}},children:h.map((function(e,t){return(0,ht.jsx)(Qn.Z,{title:e.label,children:(0,ht.jsx)(Vn.Z,{onClick:function(){c(null),e.onClick()},sx:{color:"white"},children:(0,ht.jsx)(Bn.Z,{children:e.icon})})},t)}))}),(0,ht.jsxs)(yn.Z,{sx:{flexGrow:0,pl:0,display:{xs:"block",sm:"none"}},children:[(0,ht.jsx)(Qn.Z,{title:"Additional",children:(0,ht.jsx)(Vn.Z,{onClick:function(e){p(e.currentTarget)},children:(0,ht.jsx)(Bn.Z,{children:"menu"})})}),(0,ht.jsx)(Gn.Z,{sx:{mt:"45px"},anchorEl:f,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(f),onClose:m,children:(t=h,(0,ht.jsx)("div",{children:t.map((function(e,t){return(0,ht.jsxs)(Yn.Z,{onClick:function(){m(),e.onClick()},children:[(0,ht.jsx)(Jn.Z,{children:(0,ht.jsx)(Bn.Z,{fontSize:"small",children:e.icon})}),(0,ht.jsx)(Kn.Z,{children:e.label})]},t)}))}))})]})]}),(0,ht.jsx)(jr,{})]})};function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kr=Ht.styled.custom(yn.Z,(function(e){var t;return t={position:"absolute",top:0,right:0,maxHeight:"calc(var(--window-height) - 40px)",zIndex:e.zIndex.appBar+2,backgroundColor:(0,Ht.alpha)(e.palette.background.paper,.9),pointerEvents:"all",overflow:"auto",padding:e.spacing(2,3,3),borderRadius:e.shape.borderRadius},(0,r.Z)(t,e.breakpoints.down("md"),{width:"calc(100vw - 30px)"}),(0,r.Z)(t,e.breakpoints.up("md"),{width:"100%",minWidth:500,maxWidth:"40vw"}),t})),Tr=Ht.styled.ul((function(e){return{display:"flex",alignItems:"center",paddingBottom:e.spacing(1),marginBottom:e.spacing(2),borderBottom:"solid 1px ".concat(e.palette.divider),'& > [data-li="title"]':Pr({flexGrow:1},e.typography.h6)}}));function Rr(e){var t=o.useState(!1),n=(0,u.Z)(t,2),r=n[0],i=n[1];return o.useImperativeHandle(e.innerRef,(function(){return{open:function(){return i((function(e){return!e}))}}})),!1===r?(0,ht.jsx)("div",{}):(0,ht.jsxs)(kr,{children:[(0,ht.jsxs)(Tr,{children:[(0,ht.jsx)("li",{"data-li":"title",children:e.title}),(0,ht.jsx)("li",{children:(0,ht.jsx)(Vn.Z,{onClick:function(){i(!1),e.onClose()},children:(0,ht.jsx)(Bn.Z,{children:"close"})})})]}),e.children]})}var Er=o.forwardRef((function(e,t){return(0,ht.jsx)(Rr,Pr(Pr({},e),{},{innerRef:t}))})),Dr=n(476),_r=n(8962),Zr=n(4597),Mr=["content","height","viewOnly"],Ir=["json","plainText"];function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Lr=Ht.styled.div((function(e){return{border:"solid 1px ".concat(e.palette.divider),borderRadius:e.shape.borderRadius,"& > div":{}}})),Br=Ht.styled.custom(Dr.Z,(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({display:"block",padding:e.spacing(1)},e.typography.caption)}));function zr(e){var t=e.content,n=e.height,r=e.viewOnly,o=(0,i.Z)(e,Mr),a="string"===typeof t?JSON.parse(t):t,s=function(e){var t=e.json;e.plainText,(0,i.Z)(e,Ir);try{t=JSON.parse(t)}catch(n){}o.onChange(t)};return(0,ht.jsxs)(Lr,{children:[o.label?(0,ht.jsx)(Br,{children:o.label}):"",(0,ht.jsx)(_r.Z,{onChange:s,onBlur:s,onKeyPressUpdate:!0,placeholder:a,theme:"dark_vscode_tribute",locale:Zr.default,viewOnly:r,colors:{background:"transparent",string:"#DAA520"},width:"100%",height:n})]})}zr.defaultProps={height:300,viewOnly:!1,label:""};var Ur=zr;var Fr=function(){var e=$t();return(0,ht.jsx)("div",{children:(0,ht.jsx)(Ur,{label:"State data",content:e.state,height:"50vh",onChange:function(){},viewOnly:!0})})},Nr=n(6863);var Wr=function(){var e=Nt(),t=o.useRef(null);return(0,ht.jsxs)("div",{children:[(0,ht.jsxs)(Nr.Z,{sx:{mb:2},fullWidth:!0,variant:"outlined",color:"inherit",children:[(0,ht.jsx)($n.Z,{onClick:function(){return t.current.open()},children:"Manual connection"}),(0,ht.jsx)($n.Z,{sx:{width:50},onClick:function(){e.onRestartStream()},children:(0,ht.jsx)(Bn.Z,{children:"refresh"})})]}),(0,ht.jsx)(jr,{ref:t}),(0,ht.jsx)(Ur,{label:"Connection data",content:e.state,height:"50vh",onChange:function(){},viewOnly:!0})]})};var Hr=function(){return(0,ht.jsx)("div",{children:(0,ht.jsx)(Pt,{})})};var qr=function(){return(0,ht.jsx)("div",{children:"Logs..."})},Vr=n(6486),Gr=n.n(Vr),Kr=n(7922),Jr=[["system_sound","Sound: on",{enabled:!0}],["system_sound","Sound: off",{enabled:!1}]].map((function(e,t){var n=(0,u.Z)(e,3),r=n[0],i=n[1],o=n[2];return{id:"default=".concat(t),group:"Defaults",slug:r,name:i,json:o,default:!0}}));var Qr=function(){var e=(0,sn.useStorage)(),t=o.useState(!1),n=(0,u.Z)(t,2),r=n[0],i=n[1],a=o.useState((0,d.Z)(Jr)),l=(0,u.Z)(a,2),f=l[0],p=l[1];o.useEffect((function(){r||(i(!0),h.preload())}),[]);var h=new(function(){function t(){(0,s.default)(this,t)}return(0,c.default)(t,[{key:"allow",value:function(e){return!1===(null===e||void 0===e?void 0:e.default)}},{key:"preload",value:function(){for(var t in localStorage)if(t.startsWith("command=")){var n=e.getItem(t,"local");g(n)||m(n,!1)}}},{key:"update",value:function(t){this.allow(t)&&e.setItem(t.id,t,"local")}},{key:"delete",value:function(t){this.allow(t)&&e.removeItem(t.id,"local")}}]),t}()),m=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!1;try{var r;if(null===e||void 0===e||!e.id)window.ps_command_id=(null===(r=window)||void 0===r?void 0:r.ps_command_id)+1||f.length+1,e.id="command=".concat(window.ps_command_id);"undefined"===typeof e.default&&(e.default=!1),t&&h.update(e),p((function(t){return[e].concat((0,d.Z)(t))}))}catch(i){console.error(i),n=!0}return n},g=function(e){var t=!1;return p((function(n){for(var r in n){if(n[r].id==e.id){n[r]=e,t=!0;break}}return(0,d.Z)(n)})),!!t&&(h.update(e),!0)};return{commandsList:f,addCommand:m,updateCommand:g,deleteCommand:function(e){h.delete(e),p((function(t){return t=t.filter((function(t){return t.id!==e.id})),(0,d.Z)(t)}))},exportData:function(){!function(e,t){var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t+".json"),document.body.appendChild(r),r.click(),r.remove()}(f.filter((function(e){return!e.default})),"pixel_streaming_"+v()().format())},importData:function(e){if(!Array.isArray(e))return alert("Format error!"),!1;var t=!1;return e.forEach((function(e,n){t=m(e)})),!t||(alert("Format error!"),!1)}}},Yr=n(1304),$r=n.n(Yr);function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ti=Ht.styled.ul((function(e){return{"& > li":{marginBottom:e.spacing(2)}}})),ni=[["group","text",!0,"Group name"],["slug","text",!0,"Command slug"],["name","text",!0,"Name"],["json","json",!1,"JSON value"]].map((function(e){var t=(0,u.Z)(e,4);return{slug:t[0],type:t[1],required:t[2],label:t[3]}})),ri={};function ii(e){var t=o.useRef(null),n=o.useState(!0),i=(0,u.Z)(n,2),a=i[0],s=i[1],c=o.useState(ri),l=(0,u.Z)(c,2),d=l[0],f=l[1],p=d.default,h=function(){return t.current.open()},m=function(){f(ri),s(!0),t.current.close()},v=function(t){t.stopPropagation(),t.preventDefault(),a?e.onAdd(d):e.onUpdate(d),m()};o.useImperativeHandle(e.innerRef,(function(){return{addNew:function(){h(),f(ri),s(!0)},edit:function(e){h(),f(e),s(!1)}}}));return(0,ht.jsx)("div",{children:(0,ht.jsx)(gr,{ref:t,title:"Command form",subtitle:"Enter data for the test command",closeIcon:!0,showActions:!1,children:function(){var t=ni.filter((function(e){return"json"!==e.type}));return(0,ht.jsxs)(yn.Z,{component:"form",sx:{},onSubmit:v,noValidate:!1,autoComplete:"off",children:[(0,ht.jsxs)(ti,{children:[t.map((function(e,t){return(0,ht.jsx)("li",{children:(0,ht.jsx)(Xn.Z,{size:"small",variant:"outlined",disabled:p,value:d[e.slug],label:e.label,type:e.type,required:e.required,multiline:"textarea"===e.type,fullWidth:!0,onChange:(n=e.slug,function(e){var t=e.target.value;["group","slug"].includes(n)&&(t=$r()(t,{replacement:"_-",remove:void 0,lower:!1,strict:!1,trim:!0})),f((function(e){return ei(ei({},e),{},(0,r.Z)({},n,t))}))})})},t);var n})),(0,ht.jsx)("button",{type:"submit",style:{display:"none"}})]}),(0,ht.jsx)(Ur,{label:"JSON value",content:d.json,height:100,viewOnly:d.default,onChange:function(e){f((function(t){return ei(ei({},t),{},{json:e})}))}}),(0,ht.jsx)(yn.Z,{sx:{mt:2},children:a?(0,ht.jsx)($n.Z,{fullWidth:!0,type:"submit",variant:"contained",color:"primary",children:"Create command"}):!p&&(0,ht.jsxs)(yn.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,ht.jsx)($n.Z,{variant:"outlined",color:"error",onClick:function(){confirm("Are your sure?")&&(e.onDelete(d),m())},children:"Delete"}),(0,ht.jsx)($n.Z,{type:"submit",variant:"contained",color:"success",children:"Save"})]})})]})}()})})}ni.map((function(e){ri[e.slug]="json"===e.type?{}:""}));var oi=o.forwardRef((function(e,t){return(0,ht.jsx)(ii,ei(ei({},e),{},{innerRef:t}))}));function ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ci(e){var t=o.useRef(null),n=o.useState({}),r=(0,u.Z)(n,2),i=r[0],a=r[1];o.useImperativeHandle(e.innerRef,(function(){return{open:function(){t.current.open()}}}));return(0,ht.jsx)("div",{children:(0,ht.jsx)(gr,{ref:t,title:"Commands exporter",subtitle:"Tool for transfer commands between browsers",closeIcon:!0,showActions:!1,children:(0,ht.jsxs)(yn.Z,{sx:{mt:0},children:[(0,ht.jsx)(Ur,{label:"Paste the exported data",content:i,height:100,viewOnly:!1,onChange:function(e){a(e)}}),(0,ht.jsx)($n.Z,{sx:{mt:2},size:"large",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){try{var n=JSON.parse(JSON.stringify(i));console.error("check",n),e.onImport(i)&&(alert("Success!"),a({}),t.current.close())}catch(r){alert("Format error!")}},children:"Confirm import"}),(0,ht.jsx)($n.Z,{sx:{mt:5},size:"large",fullWidth:!0,variant:"outlined",color:"inherit",onClick:function(){return e.onExport()},children:"Export all"})]})})})}var ui=o.forwardRef((function(e,t){return(0,ht.jsx)(ci,si(si({},e),{},{innerRef:t}))}));function li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?li(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fi=Ht.styled.div((function(e){return{marginTop:e.spacing(2),borderRadius:e.shape.borderRadius,border:"solid 1px ".concat(e.palette.divider),overflow:"auto",maxHeight:"25vh","& > ul":di(di({borderBottom:"solid 1px ".concat(e.palette.divider),display:"flex",alignItems:"stretch"},e.typography.body2),{},{"&:hover":{backgroundColor:(0,Ht.alpha)(e.palette.divider,.04)},"&:last-child":{borderBottom:0},"& > li":{flex:1,padding:e.spacing(1,1),cursor:"pointer",display:"flex",alignItems:"center","&:hover":{backgroundColor:(0,Ht.alpha)(e.palette.divider,.1)}},'& > [data-li="content"]':{justifyContent:"space-between","& > ul":{"& > li":di(di({},e.typography.body2),{},{maxWidth:200,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.2em","&:nth-child(2)":{fontSize:11,opacity:.5}})},'& > [data-list="right"]':{"& > li":{textAlign:"right"}}},'& > [data-li="icon"]':{borderRight:"solid 1px ".concat(e.palette.divider),minWidth:45,maxWidth:45,justifyContent:"center"}})}}));var pi=function(e){var t=$t(),n=o.useRef(null),r=o.useRef(null),i=Qr(),a=o.useState(!1),s=(0,u.Z)(a,2),c=s[0],l=s[1],d=i.commandsList;return(0,ht.jsxs)("div",{children:[(0,ht.jsxs)(Nr.Z,{fullWidth:!0,variant:"outlined",color:"inherit",children:[(0,ht.jsxs)($n.Z,{onClick:function(){return l((function(e){return!e}))},children:["My commands: ",d.length]}),(0,ht.jsx)($n.Z,{sx:{width:50},onClick:function(){n.current.addNew()},children:(0,ht.jsx)(Bn.Z,{children:"add"})}),(0,ht.jsx)($n.Z,{sx:{width:50},onClick:function(){r.current.open()},children:(0,ht.jsx)(Bn.Z,{children:"cloud_upload"})})]}),(0,ht.jsx)(ui,{ref:r,onImport:i.importData,onExport:i.exportData}),(0,ht.jsx)(oi,{ref:n,onAdd:function(e){i.addCommand(e),l(!0)},onUpdate:function(e){i.updateCommand(e)},onDelete:function(e){i.deleteCommand(e)}}),(0,ht.jsx)(Kr.Z,{in:c,children:function(){if(0===d.length)return(0,ht.jsx)("div",{});var e=Gr().orderBy(d,["time","group"],["asc","asc"]);return(0,ht.jsx)(fi,{children:e.map((function(e,r){return(0,ht.jsxs)("ul",{children:[(0,ht.jsx)("li",{"data-li":"icon",onClick:function(){t.cls.client.emit({type:e.slug,value:e.json,verification_id:void 0})},children:(0,ht.jsx)(Bn.Z,{children:"play_arrow"})}),(0,ht.jsxs)("li",{"data-li":"content",onClick:function(){return n.current.edit(e)},children:[(0,ht.jsxs)("ul",{children:[(0,ht.jsx)("li",{children:e.name}),!e.default&&(0,ht.jsxs)("li",{children:["id:",e.id]})]}),(0,ht.jsxs)("ul",{"data-list":"right",children:[(0,ht.jsx)("li",{children:e.slug}),(0,ht.jsx)("li",{children:e.group})]})]})]},r)}))})}()})]})};function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vi=Ht.styled.div((function(e){return{"& > li":{marginTop:e.spacing(2),"&:first-child":{marginTop:0}}}}));var gi=function(){var e=$t(),t=function(e,t){var n=t.list.map((function(e){var t=v().utc(e.time);return mi(mi({},e),{},{time:"".concat(t.format("LTS")," (").concat(t.fromNow(),")")})}));return e=(0,ht.jsxs)("div",{children:[e," (",(0,ht.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),e.stopPropagation(),t.clear()},children:"Clear"}),")"]}),(0,ht.jsx)("div",{children:(0,ht.jsx)(Ur,{label:e,content:n,height:"25vh",onChange:function(){},viewOnly:!0})})};return(0,ht.jsx)("div",{children:(0,ht.jsxs)(vi,{children:[(0,ht.jsx)("li",{children:(0,ht.jsx)(pi,{})}),(0,ht.jsx)("li",{children:t("Commands",e.cls.commands)}),(0,ht.jsx)("li",{children:t("Callbacks",e.cls.callbacks)})]})})};var yi=function(){$t();var e=o.useState(!1),t=(0,u.Z)(e,2),n=t[0],r=t[1];(0,sn.useHotkeys)("ctrl+f",(function(e,t){e.repeat||a.open()}),[]);var i=function(e){document.fullscreenElement?(console.log("Element: ".concat(document.fullscreenElement.id," entered fullscreen mode.")),r(!0)):(console.log("Leaving fullscreen mode."),r(!1))};o.useEffect((function(){return document.addEventListener("fullscreenchange",i),function(){document.removeEventListener("fullscreenchange",i)}}),[]);var a=new(function(){function e(){(0,s.default)(this,e),this.doc=document.documentElement,this.active=n}return(0,c.default)(e,[{key:"open",value:function(){this.doc.requestFullscreen?this.doc.requestFullscreen().then((function(){})).catch((function(e){console.error({error:e})})):this.doc.webkitRequestFullscreen?this.doc.webkitRequestFullscreen().then((function(){})).catch((function(e){console.error({error:e})})):this.doc.msRequestFullscreen&&this.doc.msRequestFullscreen().then((function(){})).catch((function(e){console.error({error:e})}))}},{key:"close",value:function(){document.fullscreenElement?document.exitFullscreen().then((function(){return console.log("Document Exited from Full screen mode")})).catch((function(e){return console.error(e)})):document.documentElement.requestFullscreen()}}]),e}());return a},bi=["active","tooltip"];function xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ji=Ht.styled.custom($n.Z,(function(e){return{width:48,height:48,minWidth:"auto",backgroundColor:e.palette.background.paper}}));var Ci=function(e){var t=e.active,n=e.tooltip,r=(0,i.Z)(e,bi);return(0,ht.jsx)(Qn.Z,{title:n,children:(0,ht.jsx)(ji,wi({variant:t?"outlined":"contained"},r))})};var Si=function(){var e=yi();return(0,ht.jsx)(Ci,{tooltip:"Fullscreen",onClick:function(){e.active?e.close():e.open()},active:e.active,children:(0,ht.jsx)(Bn.Z,{children:e.active?"close":"fullscreen"})})};var Oi=function(){var e=$t(),t=!e.state.loaded||!e.state.body_clicked;return(0,ht.jsx)(Ci,{tooltip:"Volume",disabled:t,onClick:function(){return e.cls.changeVolume()},active:!1,children:(0,ht.jsx)(Bn.Z,{children:e.state.volume?"volume_up":"volume_off"})})},Pi=Ht.styled.div((function(e){return{"& > button":{marginLeft:e.spacing(1)}}}));var ki=function(){return(0,ht.jsxs)(Pi,{children:[(0,ht.jsx)(Oi,{}),(0,ht.jsx)(Si,{})]})},Ti=Ht.styled.ul((function(e){return{position:"absolute",zIndex:e.zIndex.appBar+1,top:e.spacing(2),right:e.spacing(2),pointerEvents:"all",display:"flex"}}));var Ri=function(e){var t=Nt(),n=o.useRef(null),r=o.useState(true),i=(0,u.Z)(r,2),a=i[0],s=i[1],c=o.useState(!1),d=(0,u.Z)(c,2),f=d[0],h=d[1];(0,sn.useHotkeys)("ctrl+r",function(){var e=(0,l.Z)(p().mark((function e(n,r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.repeat){e.next=5;break}if(!confirm("Do you want to restart the streaming server?")){e.next=4;break}return e.next=4,t.onRestartStream();case 4:return e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),(0,sn.useHotkeys)("ctrl+z",(function(e,t){e.repeat||s((function(e){return!e}))}),[a]);var m=function(){var e={state:["State",(0,ht.jsx)(Fr,{})],connection:["Connection",(0,ht.jsx)(Wr,{})],debug:["Debug",(0,ht.jsx)(Hr,{})],logs:["Logs",(0,ht.jsx)(qr,{})],commands:["Commands",(0,ht.jsx)(gi,{})]},t=e[f],r="",i=(0,ht.jsx)("div",{});return e.hasOwnProperty(f)&&(r=t[0],i=t[1]),(0,ht.jsx)(Er,{ref:n,title:r,onClose:function(){h(!1)},children:i})},v=function(e){var t;h(e),null===(t=n.current)||void 0===t||t.open()};return(0,ht.jsx)("div",{children:(0,ht.jsxs)(Ti,{children:[(0,ht.jsx)(ki,{}),function(){if(a)return(0,ht.jsxs)(yn.Z,{sx:{ml:1},children:[m(),(0,ht.jsx)(Sr,{handleMenu:v})]})}()]})})};function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _i=Ht.styled.ul((function(e){return{"& > li":{marginBottom:e.spacing(2)}}}));var Zi=function(e){var t=(0,sn.useStorage)(),n=o.useState(!1),i=(0,u.Z)(n,2),a=i[0],s=i[1],c=o.useState({name:"",email:"",message:""}),d=(0,u.Z)(c,2),f=d[0],h=d[1];o.useEffect((function(){var n=t.getItem(e.storageKey,"local");"object"===typeof n&&h(n)}),[]);var m=function(e){return function(t){var n=t.target.value;h((function(t){return Di(Di({},t),{},(0,r.Z)({},e,n))}))}},v=function(){var n=(0,l.Z)(p().mark((function n(r){var i;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.stopPropagation(),r.preventDefault(),i=Di(Di({},f),{},{phone:"00000000",url:document.location.href}),s(!0),"https://api.unrealos.com/api/contacts/send_message/",n.next=7,Mt.Request.POST("https://api.unrealos.com/api/contacts/send_message/",i).then((function(n){200===n.status?(t.setItem(e.storageKey,{name:f.name,email:f.email},"local"),e.onDialogClose()):alert("Fields filled with errors")})).catch((function(t){alert("Undefined error"),console.error(t),e.onDialogClose()}));case 7:s(!1);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,ht.jsxs)("div",{children:[(0,ht.jsx)(gn.Z,{variant:"h6",sx:{mb:3},children:"Tell us about yourself:"}),(0,ht.jsxs)("form",{onSubmit:v,children:[(0,ht.jsxs)(_i,{children:[(0,ht.jsx)("li",{children:(0,ht.jsx)(Xn.Z,{disabled:a,value:f.name,onChange:m("name"),label:"Name",type:"text",fullWidth:!0,required:!0})}),(0,ht.jsx)("li",{children:(0,ht.jsx)(Xn.Z,{disabled:a,value:f.email,onChange:m("email"),label:"Email",type:"email",fullWidth:!0,required:!0})}),(0,ht.jsx)("li",{children:(0,ht.jsx)(Xn.Z,{disabled:a,value:f.message,onChange:m("message"),label:"Where do you work?",type:"text",multiline:!0,minRows:2,maxRows:8,fullWidth:!0,required:!0})})]}),(0,ht.jsx)($n.Z,{sx:{mt:2},disabled:a,type:"submit",fullWidth:!0,color:"primary",size:"large",variant:"contained",children:"Done"})]})]})};var Mi=function(){return(0,ht.jsxs)(yn.Z,{sx:{mb:4},children:[(0,ht.jsx)(gn.Z,{variant:"h5",children:"Right now, MetaEditor is running a streaming server with Unreal Engine."}),(0,ht.jsx)(yn.Z,{sx:{my:3},children:(0,ht.jsx)(jn,{})}),(0,ht.jsx)(gn.Z,{variant:"body1",sx:{mb:1},children:"This is a demo version, and in production, the launch takes a couple of seconds."}),(0,ht.jsx)(gn.Z,{variant:"body1",children:"While it's loading, let's get to know each other!"})]})};var Ii=function(){var e=o.useRef(null),t=(0,sn.useStorage)(),n="welcomeDialogForm",r=o.useState(!1),i=(0,u.Z)(r,2),a=i[0],s=i[1];return o.useEffect((function(){a||"object"!==typeof t.getItem(n,"local")&&(s(!0),setTimeout((function(){e.current.open()}),5e3))}),[]),(0,ht.jsx)("div",{children:(0,ht.jsx)(gr,{ref:e,title:"Welcome!",subtitle:void 0,defaultOpen:!1,closeIcon:!0,showActions:!1,children:(0,ht.jsxs)(yn.Z,{sx:{p:2},children:[(0,ht.jsx)(Mi,{}),(0,ht.jsx)(Zi,{storageKey:n,onDialogClose:function(){return e.current.close()}})]})})})},Ai=n(4147),Li=n(326),Bi=n(7948);function zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zi(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fi=Ht.styled.ul((function(e){return{display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(1,2,1,3),borderBottom:"solid 1px ".concat(e.palette.divider),'& > [data-li="title"]':{display:"flex",alignItems:"center","& > [data-icon]":{marginRight:e.spacing(1)}},'& > [data-li="close"]':{}}})),Ni=Ht.styled.div((function(e){var t,n,i,o;return o={padding:e.spacing(3),display:"flex"},(0,r.Z)(o,e.breakpoints.down("sm"),{flexDirection:"column"}),(0,r.Z)(o,"& > [data-list]",{'& > [data-li="image"]':{marginBottom:e.spacing(4)}}),(0,r.Z)(o,'& > [data-list="keyboard"]',{'& > [data-li="image"]':{"& > img":{width:"100%"}},'& > [data-li="info"]':{display:"flex",justifyContent:"space-between","& > ul":{"& > li":{display:"flex",alignItems:"center",marginBottom:e.spacing(.5),"&:last-child":{marginBottom:0},"& > span":{width:30,height:30,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.palette.background.default,border:"solid 1px ".concat(e.palette.divider),borderRadius:e.shape.borderRadius,fontSize:11},"& > label":Ui({marginLeft:e.spacing(1)},e.typography.body2)}}}}),(0,r.Z)(o,'& > [data-list="mouse"]',(i={},(0,r.Z)(i,e.breakpoints.down("sm"),{display:"flex",marginTop:e.spacing(4),paddingTop:e.spacing(4),borderTop:"solid 1px ".concat(e.palette.divider)}),(0,r.Z)(i,e.breakpoints.up("md"),{marginLeft:e.spacing(8),flex:"1 0 30%",maxWidth:"30%"}),(0,r.Z)(i,'& > [data-li="image"]',(t={},(0,r.Z)(t,e.breakpoints.down("sm"),{marginRight:e.spacing(3),maxWidth:"30%"}),(0,r.Z)(t,"& > img",{height:"100%"}),t)),(0,r.Z)(i,'& > [data-li="info"]',{"& > ul":{"& > li":{display:"flex",alignItems:"center",marginBottom:e.spacing(1.5),"&:last-child":{marginBottom:0},"& > span":(n={minWidth:130,borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.default,border:"solid 1px ".concat(e.palette.divider)},(0,r.Z)(n,"borderRadius",e.shape.borderRadius),(0,r.Z)(n,"padding",e.spacing(.5,1)),(0,r.Z)(n,"textAlign","center"),(0,r.Z)(n,"fontSize",11),(0,r.Z)(n,"textTransform","uppercase"),n),"& > label":Ui({marginLeft:e.spacing(1)},e.typography.body2)}}}),i)),o}));var Wi=function(e){var t=o.useState(!1),n=(0,u.Z)(t,2),r=n[0],i=n[1],s=o.useState(0),c=(0,u.Z)(s,2),l=c[0],d=c[1],f=(0,sn.useMedia)().down.sm,p=o.useRef(null);o.useEffect((function(){window.addEventListener("resize",(function(){var e;d((null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.clientHeight)||0)}),!0)}),[]);var h=function(){i(!1)},m=[["Forward",["W","arrow_drop_up"]],["Left",["A","arrow_left"]],["Right",["D","arrow_right"]],["Backward",["S","arrow_drop_down"]]];return(0,ht.jsxs)("div",{children:[e.children((function(){i(!0)})),(0,ht.jsxs)(tr.Z,{maxWidth:"lg",fullWidth:!0,fullScreen:f,open:r,onClose:h,children:[(0,ht.jsxs)(Fi,{children:[(0,ht.jsxs)("li",{"data-li":"title",children:[(0,ht.jsx)(Bn.Z,{"data-icon":!0,children:"help"}),(0,ht.jsx)("h4",{children:"Help center"})]}),(0,ht.jsx)("li",{"data-li":"close",children:(0,ht.jsx)(Vn.Z,{onClick:h,children:(0,ht.jsx)(Bn.Z,{children:"close"})})})]}),(0,ht.jsxs)(Ni,{children:[(0,ht.jsxs)("ul",{"data-list":"keyboard",children:[(0,ht.jsx)("li",{"data-li":"image",children:(0,ht.jsx)("img",{ref:p,src:a.env.staticPath("player","helper","keyboard.svg")})}),(0,ht.jsxs)("li",{"data-li":"info",children:[(0,ht.jsx)("ul",{children:m.map((function(e,t){var n=(0,u.Z)(e,2),r=n[0],i=n[1];return(0,ht.jsxs)("li",{children:[(0,ht.jsx)("span",{children:i[0]}),(0,ht.jsxs)("label",{children:["\u2014 ",r]})]},t)}))}),(0,ht.jsx)("ul",{children:m.map((function(e,t){var n=(0,u.Z)(e,2),r=n[0],i=n[1];return(0,ht.jsxs)("li",{children:[(0,ht.jsx)("span",{children:(0,ht.jsx)(Bn.Z,{children:i[1]})}),(0,ht.jsxs)("label",{children:["\u2014 ",r]})]},t)}))})]})]}),(0,ht.jsxs)("ul",{"data-list":"mouse",children:[(0,ht.jsx)("li",{"data-li":"image",children:(0,ht.jsx)("img",{src:a.env.staticPath("player","helper","mouse.svg"),style:{maxHeight:l||"auto"}})}),(0,ht.jsx)("li",{"data-li":"info",children:(0,ht.jsx)("ul",{children:[["Left click","Look around"],["Right click","Move perspective"],["Scroll","Walk forward/backward"]].map((function(e,t){var n=(0,u.Z)(e,2),r=n[0],i=n[1];return(0,ht.jsxs)("li",{children:[(0,ht.jsx)("span",{children:r}),(0,ht.jsxs)("label",{children:["\u2014 ",i]})]},t)}))})})]})]})]})]})};var Hi=function(e){var t,n,r=$t(),i=(0,sn.useHelpers)(),o=(null===(t=r.state.aggregated_stats)||void 0===t?void 0:t.bitrate)||0,a=(null===(n=r.state.aggregated_stats)||void 0===n?void 0:n.bytesReceived)||0;return{signal:o<1e3?1:o<3e3?2:3,bitrate_hint:i.format.formatNumber(o,{decimal:0,separator:"."}),received_hint:i.format.formatBytes(a)}},qi=n(1313),Vi=Ht.styled.withStyles(qi.ZP,(function(e){return{root:{pointerEvents:"all",color:"rgba(255,255,255, 1)",padding:"0 0 4px"},disabled:{opacity:.7},thumb:{},active:{},valueLabel:{top:-20,"& > span":{backgroundColor:"transparent",whiteSpace:"nowrap"}},track:{height:1,color:"rgba(255,255,255, .5)"},rail:{height:1,color:"rgba(255,255,255,.5)"}}}));function Gi(e){var t=o.useState(e.defaultValue),n=(0,u.Z)(t,2),r=n[0],i=n[1];return(0,ht.jsx)(Vi,{disabled:e.disabled,step:e.step,min:e.min,max:e.max,value:r,onChange:function(t,n){i(n),e.onChange(n)},valueLabelDisplay:"off",getAriaValueText:function(e){return e},valueLabelFormat:e.format})}Gi.defaultProps={};var Ki=Gi,Ji=["value"];function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $i=Ht.styled.custom(Vn.Z,(function(e){return{'&[data-size="small"]':{padding:8},'&[data-size="medium"]':{},'&[data-size="large"]':{"& .material-icons":{fontSize:50}}}}));function Xi(e){var t=e.value,n=(0,i.Z)(e,Ji);return(0,ht.jsx)($i,Yi(Yi({},n),{},{"data-size":n.size,children:(0,ht.jsx)(Bn.Z,{children:{1:"signal_wifi_bad",2:"signal_wifi_statusbar_null",3:"signal_wifi_statusbar_4_bar"}[t]})}))}Xi.defaultProps={size:"medium"};var eo=Xi,to=Ht.styled.ul((function(e){return{display:"flex",justifyContent:"center",'& > [data-li="icon"]':{marginRight:e.spacing(3)},'& > [data-li="content"]':{flex:1}}})),no=Ht.styled.ul((function(e){return{paddingBottom:e.spacing(2),"& > li":{display:"flex",alignItems:"center",paddingBottom:e.spacing(1),"& > label":{color:e.palette.text.secondary,flex:1,maxWidth:120}}}}));var ro=function(e){var t=$t(),n=Hi(),r=o.useRef(null);return(0,ht.jsxs)("div",{children:[e.children((0,ht.jsx)(eo,{disabled:!t.state.loaded,size:"small",value:n.signal,onClick:function(){r.current.open()}})),(0,ht.jsx)(gr,{ref:r,title:"Signal Quality",subtitle:void 0,closeIcon:!0,showActions:!1,children:function(){var e=t.state.window_size,r=e.width,i=e.height,o=[["Bitrate",n.bitrate_hint+" kbps"],["Received",n.received_hint],["Resolution",r+" x "+i+" px"],["Quality",function(){var e=t.state.resolution_multiplier;return e<.8?"low":e<1.2?"normal":e<1.6?"good":"best!"}()]];return(0,ht.jsxs)(to,{children:[(0,ht.jsx)("li",{"data-li":"icon",children:(0,ht.jsx)(eo,{size:"large",value:n.signal})}),(0,ht.jsxs)("li",{"data-li":"content",children:[(0,ht.jsx)(no,{children:o.map((function(e,t){var n=(0,u.Z)(e,2),r=n[0],i=n[1];return(0,ht.jsxs)("li",{children:[(0,ht.jsxs)("label",{children:[r,":"]}),(0,ht.jsx)("span",{children:i})]},t)}))}),(0,ht.jsx)(Ki,{step:.01,min:.5,max:2,defaultValue:t.state.resolution_multiplier,onChange:function(e){t.cls.changeQuality(e)}})]})]})}()})]})},io=[["About","about"],["\u0421onfiguration","\u0441onfiguration"],["Contacts","contacts"]].map((function(e){var t=(0,u.Z)(e,2);return{label:t[0],slug:t[1]}})),oo=["Profile","Account","Dashboard","Logout"],ao=Ht.styled.custom(Hn.Z,(function(e){return{background:"transparent",boxShadow:"none"}})),so=Ht.styled.custom($n.Z,(function(e){return{border:"solid 1px transparent",padding:e.spacing(1,2),"&:hover":{backgroundColor:"transparent",borderColor:"rgba(255,255,255,.1)"},'&[data-selected="true"]':{backgroundColor:"rgba(255,255,255,.05)",borderColor:"rgba(255,255,255,.1)"}}})),co=function(){var e=$t(),t=ln(),n=(0,sn.useMedia)(),r=o.useState(null),i=(0,u.Z)(r,2),s=i[0],c=i[1],l=o.useState(null),d=(0,u.Z)(l,2),f=d[0],p=d[1],h=(e.state.loaded,n.down.sm),m=function(e){c(e.currentTarget)},v=function(e){p(e.currentTarget)},g=function(){c(null)},y=function(){p(null)},b=function(e){return function(n){t.handleMenu(e),g()}},x=function(e){return e.slug===t.state.current_menu},w=Ai.version;return(0,ht.jsx)("div",{children:(0,ht.jsx)(ao,{position:"static",children:(0,ht.jsx)(Bi.Z,{maxWidth:!1,children:(0,ht.jsxs)(qn.Z,{disableGutters:!0,children:[(0,ht.jsxs)(gn.Z,{variant:"h6",noWrap:!0,component:"div",sx:{mr:2,display:{xs:"none",md:"flex"},cursor:"default"},children:[a.env.data.siteLogoName,(0,ht.jsxs)(yn.Z,{component:"small",sx:{ml:1,opacity:.5,fontSize:11},children:["v",w]})]}),(0,ht.jsxs)(yn.Z,{sx:{display:{xs:"flex",md:"none"}},children:[(0,ht.jsx)(Vn.Z,{size:"large",onClick:m,color:"inherit",children:(0,ht.jsx)(Li.Z,{})}),(0,ht.jsx)(Gn.Z,{anchorEl:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(s),onClose:g,sx:{display:{xs:"block",md:"none"}},children:io.map((function(e,t){return(0,ht.jsx)(Yn.Z,{selected:x(e),onClick:b(e.slug),children:e.label},t)}))})]}),(0,ht.jsx)(gn.Z,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:a.env.data.siteLogoName}),(0,ht.jsx)(yn.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"},justifyContent:"center"},children:io.map((function(e,t){return(0,ht.jsx)(so,{"data-selected":x(e),onClick:b(e.slug),sx:{my:0,mx:1,color:"white",display:"block"},children:e.label},t)}))}),(0,ht.jsx)(ro,{children:function(e){return(0,ht.jsx)(Qn.Z,{title:"Signal Quality",children:(0,ht.jsx)("span",{children:e})})}}),(0,ht.jsx)(Qn.Z,{title:t.state.ui_visible?"Hide UI":"Show UI",children:(0,ht.jsx)("span",{children:(0,ht.jsx)(Vn.Z,{onClick:function(){return t.handleUiVisible()},children:(0,ht.jsx)(Bn.Z,{children:t.state.ui_visible?"visibility":"visibility_off"})})})}),!h&&(0,ht.jsx)(Wi,{children:function(e){return(0,ht.jsx)(Qn.Z,{title:"Help",children:(0,ht.jsx)(Vn.Z,{onClick:e,children:(0,ht.jsx)(Bn.Z,{children:"help"})})})}}),(0,ht.jsxs)(yn.Z,{sx:{flexGrow:0},children:[(0,ht.jsx)(Qn.Z,{title:"Open settings",children:(0,ht.jsx)(Vn.Z,{onClick:v,children:(0,ht.jsx)(Bn.Z,{children:"settings"})})}),(0,ht.jsx)(Gn.Z,{anchorEl:f,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(f),onClose:y,children:oo.map((function(e){return(0,ht.jsx)(Yn.Z,{onClick:y,children:(0,ht.jsx)(gn.Z,{textAlign:"center",children:e})},e)}))})]})]})})})})};co.defaultProps={};var uo=co,lo=n(7358),fo=n(8895),po=n(2797),ho=Ht.styled.div((function(e){return{overflowX:"hidden",overflowY:"auto",maxHeight:300}}));var mo=function(e){return(0,ht.jsx)(Bi.Z,{maxWidth:"lg",children:(0,ht.jsx)(ho,{children:e.children})})},vo=["slug"],go=Ht.styled.withStyles(lo.Z,(function(e){return{root:{padding:0,backgroundColor:"transparent",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}}})),yo=Ht.styled.withStyles(fo.Z,(function(e){return{root:{display:"none","&$expanded":{}},content:{"&$expanded":{}},expanded:{}}})),bo=Ht.styled.withStyles(po.Z,(function(e){return{root:{padding:0}}}));var xo=function(e){var t=e.slug,n=(0,i.Z)(e,vo),r=o.useState(!1),a=(0,u.Z)(r,2),s=a[0],c=a[1],l=o.useState(!1),d=(0,u.Z)(l,2),f=d[0],p=d[1],h=o.useState(!1),m=(0,u.Z)(h,2),v=m[0],g=m[1],y=o.useRef(null);o.useEffect((function(){if(!v)return g(!0),void c(t);c(!1),p(t),p(!1),c(t)}),[t]),o.useEffect((function(){return function(){clearTimeout(y.current)}}),[]);var b=function(e){if(f!==e.slug)return e.container?(0,ht.jsx)(mo,{children:e.children()}):(0,ht.jsx)("div",{children:e.children()})};return(0,ht.jsx)("div",{children:n.list.map((function(e,t){return(0,ht.jsxs)(go,{square:!0,expanded:s===e.slug,TransitionProps:{unmountOnExit:!1,timeout:{appear:300,enter:500,exit:200}},children:[(0,ht.jsx)(yo,{}),(0,ht.jsx)(bo,{style:{paddingBottom:0},children:b(e)})]},t)}))})};function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Co=Ht.styled.ul((function(e){var t;return t={paddingBottom:e.spacing(2)},(0,r.Z)(t,e.breakpoints.down("sm"),{'& > [data-li="info"]':{display:"none"}}),(0,r.Z)(t,e.breakpoints.up("sm"),{display:"flex","& > li":{flex:1},'& > [data-li="content"]':{paddingRight:e.spacing(6)},'& > [data-li="info"]':{maxWidth:"30%",minWidth:300}}),t})),So=Ht.styled.ul((function(e){var t;return t={},(0,r.Z)(t,e.breakpoints.down("sm"),{'& > [data-li="image"]':{display:"none"}}),(0,r.Z)(t,e.breakpoints.up("sm"),{display:"flex",'& > [data-li="image"]':{maxWidth:200,margin:e.spacing(0,8,0,0),"& > img":{width:"100%",borderRadius:e.shape.borderRadius}}}),(0,r.Z)(t,'& > [data-li="content"]',{"& > ul":{'& > [data-li="title"]':jo(jo({},e.typography.h4),{},{minHeight:40}),'& > [data-li="description"]':jo(jo({},e.typography.body1),{},(0,r.Z)({paddingBottom:e.spacing(2)},e.breakpoints.up("sm"),{minHeight:80})),'& > [data-li="buttons"]':{display:"flex",flexWrap:"wrap",margin:e.spacing(0,-.5),"& > *":{margin:e.spacing(.5)}}}}),t})),Oo=Ht.styled.ul((function(e){return{'& > [data-li="title"]':jo(jo({},e.typography.h6),{},{minHeight:40}),'& > [data-li="content"]':{minHeight:80,"& > ul":{"& > li":{display:"flex",marginBottom:e.spacing(1),fontSize:e.typography.caption.fontSize,"&:last-child":{marginBottom:0},"& > label":{width:140,fontWeight:e.typography.fontWeightBold}}}},'& > [data-li="button"]':{marginTop:e.spacing(2)}}}));var Po=function(e){return(0,sn.useMedia)(),(0,ht.jsx)("div",{children:(0,ht.jsxs)(Co,{children:[(0,ht.jsx)("li",{"data-li":"content",children:function(){var e,t=null===(e="The Audi A4 is a line of compact executive cars produced since 1994 by the German car manufacturer Audi, a subsidiary of the Volkswagen Group.")?void 0:e.replace(/^(.{160}[^\s]*).*/,"$1");return(0,ht.jsxs)(So,{children:[(0,ht.jsx)("li",{"data-li":"image",children:(0,ht.jsx)("img",{src:a.env.staticPath("tmp","about_preview.jpg")})}),(0,ht.jsx)("li",{"data-li":"content",children:(0,ht.jsxs)("ul",{children:[(0,ht.jsx)("li",{"data-li":"title",children:"Audi A4"}),(0,ht.jsx)("li",{"data-li":"description",children:t}),(0,ht.jsx)("li",{"data-li":"buttons",children:(0,ht.jsx)($n.Z,{variant:"contained",color:"secondary",disabled:!0,children:"Read more"})})]})})]})}()}),(0,ht.jsx)("li",{"data-li":"info",children:function(){var e=[["Top Speed","250 km/h or 155 Mph"],["Horsepower","265 hp / 195 kW"],["Engine size","1984 cm3 (121.1 cu-in)"]].map((function(e){var t=(0,u.Z)(e,2);return{label:t[0],value:t[1]}}));return(0,ht.jsxs)(Oo,{children:[(0,ht.jsx)("li",{"data-li":"title",children:"Info"}),(0,ht.jsx)("li",{"data-li":"content",children:(0,ht.jsx)("ul",{children:e.map((function(e,t){return(0,ht.jsxs)("li",{children:[(0,ht.jsxs)("label",{children:[e.label,":"]}),(0,ht.jsx)("span",{children:e.value})]},t)}))})}),(0,ht.jsx)("li",{"data-li":"button",children:(0,ht.jsx)($n.Z,{variant:"contained",color:"secondary",disabled:!0,children:"Ride now!"})})]})}()})]})})};function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function To(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ro=Ht.styled.ul((function(e){var t;return t={paddingBottom:e.spacing(2)},(0,r.Z)(t,e.breakpoints.down("sm"),{'& > [data-li="info"]':{display:"none"}}),(0,r.Z)(t,e.breakpoints.up("sm"),{display:"flex","& > li":{flex:1},'& > [data-li="content"]':{paddingRight:e.spacing(6)},'& > [data-li="info"]':{maxWidth:"30%",minWidth:300}}),t})),Eo=Ht.styled.ul((function(e){var t;return t={},(0,r.Z)(t,e.breakpoints.down("sm"),{'& > [data-li="image"]':{display:"none"}}),(0,r.Z)(t,e.breakpoints.up("sm"),{display:"flex",'& > [data-li="image"]':{maxWidth:200,margin:e.spacing(0,8,0,0),"& > img":{width:"100%",borderRadius:e.shape.borderRadius}}}),(0,r.Z)(t,'& > [data-li="content"]',{"& > ul":{'& > [data-li="title"]':To(To({},e.typography.h4),{},{minHeight:40}),'& > [data-li="description"]':To(To({},e.typography.body1),{},(0,r.Z)({paddingBottom:e.spacing(2)},e.breakpoints.up("sm"),{minHeight:80})),'& > [data-li="buttons"]':{display:"flex",flexWrap:"wrap",margin:e.spacing(0,-.5),"& > *":{margin:e.spacing(.5)}}}}),t})),Do=Ht.styled.ul((function(e){return{'& > [data-li="title"]':To(To({},e.typography.h6),{},{minHeight:40}),'& > [data-li="content"]':{minHeight:80,"& > ul":{"& > li":{display:"flex",marginBottom:e.spacing(1),fontSize:e.typography.caption.fontSize,"&:last-child":{marginBottom:0},"& > label":{width:140,fontWeight:e.typography.fontWeightBold}}}},'& > [data-li="button"]':{marginTop:e.spacing(2)}}}));var _o=function(e){return(0,sn.useMedia)(),(0,ht.jsx)("div",{children:(0,ht.jsxs)(Ro,{children:[(0,ht.jsx)("li",{"data-li":"content",children:function(){var e,t=null===(e="The AUDI AG stands for sporty vehicles, high build quality and progressive design \u2013 for \u201cVorsprung durch Technik.\u201d The Audi Group is among the world\u2019s leading producers of premium cars. To play an instrumental role in shaping the transformation as we head into a new age of mobility the Company is implementing its strategy step by step.")?void 0:e.replace(/^(.{160}[^\s]*).*/,"$1");return(0,ht.jsxs)(Eo,{children:[(0,ht.jsx)("li",{"data-li":"image",children:(0,ht.jsx)("img",{src:a.env.staticPath("tmp","about_preview.jpg")})}),(0,ht.jsx)("li",{"data-li":"content",children:(0,ht.jsxs)("ul",{children:[(0,ht.jsx)("li",{"data-li":"title",children:"Company"}),(0,ht.jsx)("li",{"data-li":"description",children:t}),(0,ht.jsx)("li",{"data-li":"buttons",children:(0,ht.jsx)($n.Z,{variant:"contained",color:"secondary",disabled:!0,children:"Find a salon"})})]})})]})}()}),(0,ht.jsx)("li",{"data-li":"info",children:function(){var e=[["Email","customer@audi.com"],["Phone","+65 6836 2223"],["Address","281 Alexandra Rd, Singapore 159938"]].map((function(e){var t=(0,u.Z)(e,2);return{label:t[0],value:t[1]}}));return(0,ht.jsxs)(Do,{children:[(0,ht.jsx)("li",{"data-li":"title",children:"Contacts"}),(0,ht.jsx)("li",{"data-li":"content",children:(0,ht.jsx)("ul",{children:e.map((function(e,t){return(0,ht.jsxs)("li",{children:[(0,ht.jsxs)("label",{children:[e.label,":"]}),(0,ht.jsx)("span",{children:e.value})]},t)}))})}),(0,ht.jsx)("li",{"data-li":"button",children:(0,ht.jsx)($n.Z,{variant:"contained",color:"secondary",disabled:!0,children:"Send message"})})]})}()})]})})},Zo=n(9902),Mo=n.n(Zo),Io=Ht.styled.div((function(e){return{display:"flex",overflow:"hidden"}}));function Ao(e){var t=e.type;return(0,ht.jsx)(Vn.Z,{children:(0,ht.jsx)(Bn.Z,{fontSize:"large",children:"left"===t?"keyboard_arrow_left":"keyboard_arrow_right"})})}function Lo(e){var t=(0,sn.useMedia)(),n=o.useState(!1),r=(0,u.Z)(n,2),i=r[0],a=r[1],s=(0,o.useState)(0),c=s[0],l=s[1];o.useEffect((function(){a(!0)}),[]);for(var d=t.up.lg,f=e.numberOfCards.default||4,p=0,h=["xs","sm","md","lg","xl","xxl"];p<h.length;p++){var m=h[p];if(e.numberOfCards[m]&&(t.down[m]||t.only[m])){f=e.numberOfCards[m];break}}if(!i){var v=e.items.filter((function(e,t){return t<f}));return(0,ht.jsx)(Io,{children:v.map((function(t,n){return e.children(t,n)}))})}return(0,ht.jsx)("div",{style:{maxWidth:"100vw"},children:(0,ht.jsx)(Mo(),{requestToChangeActive:l,activeItemIndex:c,numberOfCards:f,gutter:e.gutter,leftChevron:(0,ht.jsx)(Ao,{type:"left"}),rightChevron:(0,ht.jsx)(Ao,{type:"right"}),outsideChevron:d,chevronWidth:e.chevronWidth,infiniteLoop:e.infiniteLoop,children:e.items.map((function(t,n){return e.children(t,n)}))})})}Lo.defaultProps={infiniteLoop:!1,numberOfCards:{xs:1,md:2,default:4},chevronWidth:60,gutter:20};var Bo=Lo,zo=Ht.styled.div((function(e){var t;return t={},(0,r.Z)(t,e.breakpoints.down("lg"),{padding:e.spacing(0,2,2)}),(0,r.Z)(t,e.breakpoints.up("lg"),{padding:e.spacing(2,10)}),t})),Uo=Ht.styled.ul((function(e){return{display:"flex",pointerEvents:"all",cursor:"pointer",border:"solid 2px transparent",borderRadius:e.shape.borderRadius,transition:e.transitions.create(["border-color"]),backgroundColor:"rgba(0,0,0,.9)",padding:e.spacing("2px"),minHeight:110,"&:hover":{borderColor:e.palette.primary.main},'& > [data-li="image"]':{minWidth:100,maxWidth:100,backgroundColor:e.palette.background.default,borderRadius:e.shape.borderRadius/1.3,backgroundSize:"cover",backgroundPosition:"center center"},'& > [data-li="content"]':{flex:1,padding:e.spacing(1,2)}}}));function Fo(e){return(0,ht.jsx)(zo,{children:(0,ht.jsx)(Bo,{numberOfCards:{xs:1,sm:2,md:3,lg:4,xl:5,xxl:6,default:4},infiniteLoop:!0,gutter:10,items:e.items,children:function(t,n){var r=e.image(t);return(0,ht.jsxs)(Uo,{onClick:function(){return e.onClickItem(t,n)},children:[r?(0,ht.jsx)("li",{"data-li":"image",style:{backgroundImage:"url(".concat(r,")")}}):"",(0,ht.jsx)("li",{"data-li":"content",children:e.children(t,n)})]},n)}})})}Fo.defaultProps={};var No=Fo;var Wo=function(){var e=ln();return(0,ht.jsx)("div",{children:function(){var t=["Demo","default",void 0],n=[["Body Color","body_color",a.env.staticPath("tmp","carousel_wheels.jpg")],["Interior Color","interior_color",a.env.staticPath("tmp","interior.jpg")],t,t,t,t,t,t,t,t].map((function(e){var t=(0,u.Z)(e,3);return{name:t[0],slug:t[1],src:t[2]}}));return(0,ht.jsx)(No,{image:function(e){return e.src},onClickItem:function(t,n){e.handleDrawer.open(t.slug)},items:n,children:function(e,t){return(0,ht.jsx)("div",{children:e.name})}})}()})};var Ho=function(){var e=ln(),t=[{slug:"about",children:Po,container:!0,noPadding:!1},{slug:"\u0441onfiguration",children:Wo,container:!1,noPadding:!1},{slug:"contacts",children:_o,container:!0,noPadding:!1}],n=e.state.current_menu;return(0,ht.jsx)("div",{children:(0,ht.jsx)(xo,{list:t,slug:n})})};function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Vo=Ht.styled.custom(yn.Z,(function(e){return{borderRadius:e.shape.borderRadius,backgroundColor:"rgba(0,0,0, .3)",marginBottom:5,pointerEvents:"all",transition:e.transitions.create(["background-color","border-color"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),border:"solid 1px rgba(255,255,255, .15)","&:hover":{backgroundColor:"rgba(0,0,0, .4)",borderColor:"rgba(255,255,255, .4)"}}}));var Go=function(e){return(0,ht.jsx)(Vo,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Ko=["index","onClick","imageSrc","children"],Jo=Ht.styled.ul((function(e){return{display:"flex",padding:5,minHeight:110,cursor:"pointer",'& > [data-li="image"]':{width:100,backgroundColor:"rgba(0,0,0, .4)",backgroundSize:"cover",backgroundPosition:"center center",borderRadius:e.shape.borderRadius},'& > [data-li="content"]':{flexGrow:1,padding:e.spacing(1,2)}}}));var Qo=function(e){var t=e.index,n=e.onClick,r=e.imageSrc,o=e.children;return(0,i.Z)(e,Ko),(0,ht.jsx)(Go,{children:(0,ht.jsxs)(Jo,{onClick:n,children:[r?(0,ht.jsx)("li",{"data-li":"image",style:{backgroundImage:"url(".concat(r,")")}}):"",(0,ht.jsx)("li",{"data-li":"content",children:o})]})},t)};var Yo=function(e){var t=$t(),n=ln(),r=["Color",a.env.staticPath("tmp","carousel_wheels.jpg")],i=[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r].map((function(e){var t=(0,u.Z)(e,2);return{name:t[0],src:t[1]}}));return(0,ht.jsx)("div",{children:i.map((function(e,r){return(0,ht.jsxs)(Qo,{imageSrc:e.src,onClick:function(){var i=e.name+" #".concat(r);n.draggableCard.open(i,(0,ht.jsx)($n.Z,{variant:"outlined",onClick:function(){t.cmd.testCommand({item:r})},children:"Call"}))},children:[e.name," #",r]},r)}))})};var $o=function(e){$t(),ln();var t=["Interior",a.env.staticPath("tmp","interior.jpg")],n=[t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t].map((function(e){var t=(0,u.Z)(e,2);return{name:t[0],src:t[1]}}));return(0,ht.jsx)("div",{children:n.map((function(e,t){return(0,ht.jsxs)(Qo,{imageSrc:e.src,onClick:function(){},children:[e.name," #",t]},t)}))})};var Xo=function(e){$t(),ln();var t=["Default",void 0],n=[t,t,t,t,t].map((function(e){var t=(0,u.Z)(e,2);return{name:t[0],src:t[1]}}));return(0,ht.jsx)("div",{children:n.map((function(e,t){return(0,ht.jsxs)(Qo,{imageSrc:e.src,onClick:function(){},children:[e.name," #",t]},t)}))})},ea=n(4776);function ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function na(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ta(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ra=Ht.styled.div((function(e){var t;return t={pointerEvents:"none",position:"absolute",top:0,left:0,bottom:0},(0,r.Z)(t,e.breakpoints.down("sm"),{right:0,width:"100%"}),(0,r.Z)(t,e.breakpoints.up("sm"),{minWidth:600}),(0,r.Z)(t,"&[data-expanded]",{transition:e.transitions.create(["width","padding-right"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}),(0,r.Z)(t,'&[data-expanded="true"]',(0,r.Z)({},e.breakpoints.up("sm"),{paddingRight:e.spacing(20)})),(0,r.Z)(t,'&[data-expanded="false"]',{width:100}),t})),ia=Ht.styled.ul((function(e){var t;return t={transition:e.transitions.create(["opacity"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},(0,r.Z)(t,e.breakpoints.up("sm"),{'&[data-hover="false"]':{opacity:.8},'&[data-hover="true"]':{opacity:1}}),(0,r.Z)(t,"& > li",{zIndex:e.zIndex.appBar-1,position:"absolute",top:0,left:0,bottom:0,right:0,height:"var(--window-height)"}),(0,r.Z)(t,e.breakpoints.down("sm"),{"& > li:nth-child(1)":{zIndex:e.zIndex.appBar+1,background:"linear-gradient(180deg, rgba(0,0,0,1) 0%, rgba(0,0,0,.85) 15%, rgba(0,0,0,.8) 30%)"}}),(0,r.Z)(t,e.breakpoints.up("sm"),{"& > li:nth-child(1)":{background:"linear-gradient(90deg, rgba(255,255,255,.9) 0%, rgba(255,255,255,.3) 40%, rgba(255,255,255,0) 60%)",opacity:.2},"& > li:nth-child(2)":{background:"linear-gradient(90deg, rgba(0,0,0,.9) 0%, rgba(0,0,0,.6) 30%, rgba(0,0,0,0) 100%)"}}),t})),oa=Ht.styled.div((function(e){var t;return t={height:"100%",borderRadius:e.shape.borderRadius,display:"flex",flexDirection:"column"},(0,r.Z)(t,e.breakpoints.down("sm"),{padding:e.spacing(2)}),(0,r.Z)(t,e.breakpoints.up("sm"),{padding:e.spacing(4),paddingRight:e.spacing(0)}),t})),aa=Ht.styled.ul((function(e){var t;return t={display:"flex",alignItems:"center",zIndex:e.zIndex.appBar+1,'& > [data-li="title"]':na({flex:1},e.typography.h4)},(0,r.Z)(t,e.breakpoints.down("sm"),{padding:e.spacing(0,0,2)}),(0,r.Z)(t,e.breakpoints.up("sm"),{paddingBottom:e.spacing(3)}),t})),sa=Ht.styled.ul((function(e){return{zIndex:e.zIndex.appBar+10,pointerEvents:"all",height:"100%",overflow:"auto"}})),ca=Ht.styled.div((function(e){return{position:"relative",backgroundColor:"rgba(0,0,0, .6)",height:50,zIndex:e.zIndex.appBar+10,marginTop:e.spacing(1),borderRadius:e.shape.borderRadius,borderTopLeftRadius:0,borderTopRightRadius:0,display:"flex",justifyContent:"center",alignItems:"center",border:"solid 1px rgba(255,255,255, .15)",pointerEvents:"all",cursor:"pointer",transition:e.transitions.create(["background-color","border-color"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:hover":{backgroundColor:"rgba(0,0,0, .8)",borderColor:"rgba(255,255,255, .4)"}}})),ua=Ht.styled.custom(Vn.Z,(function(e){return{pointerEvents:"all",border:0,outline:"solid 1px rgba(255,255,255, .3)"}}));function la(e){var t=o.useRef(null),n=o.useRef(null),r=(0,sn.useContainerDimensions)(n),i=o.useState(!1),a=(0,u.Z)(i,2),s=a[0],c=a[1],l=e.show,d=function(){e.onClose()},f=function(){if(r.scrollTop<=r.scrollHeight-50)return(0,ht.jsx)(ca,{onClick:function(){t.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},children:(0,ht.jsx)(Bn.Z,{children:"expand_more"})})};return(0,ht.jsx)(ra,{"data-expanded":l,children:(0,ht.jsx)(ea.Z,{in:l,direction:"right",mountOnEnter:!1,unmountOnExit:!1,children:(0,ht.jsx)(oa,{style:{height:e.height},children:(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsxs)(ia,{"data-hover":s,children:[(0,ht.jsx)("li",{}),(0,ht.jsx)("li",{})]}),(0,ht.jsxs)(aa,{children:[(0,ht.jsx)("li",{"data-li":"title",children:e.title}),(0,ht.jsx)("li",{children:(0,ht.jsx)(ua,{onClick:d,children:(0,ht.jsx)(Bn.Z,{children:"close"})})})]}),(0,ht.jsxs)(sa,{ref:n,onMouseOver:function(){return c(!0)},onMouseOut:function(){return c(!1)},children:[e.children,(0,ht.jsx)("div",{ref:t})]}),f()]})})})})}la.defaultProps={show:!1,height:0};var da=la;function fa(e){var t=ln(),n=t.state.components.streamDrawer,r=n.active&&e.show,i=n.slug,o={body_color:["Body Color",Yo],interior_color:["Interior Color",$o],default:["Default",Xo]};return(0,ht.jsx)("div",{children:(0,ht.jsx)(da,{show:r,onClose:function(){t.handleDrawer.close()},title:o.hasOwnProperty(i)&&o[i][0],height:e.height,children:function(){if(o.hasOwnProperty(i))return o[i][1]()}()})})}fa.defaultProps={show:!1,height:0};var pa=fa,ha=n(6585),ma=n(1255),va=n.n(ma),ga=Ht.styled.div((function(e){return{pointerEvents:"none",width:"100%",height:"100%",transition:e.transitions.create(["background-color"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),position:"relative",zIndex:e.zIndex.appBar+20,padding:e.spacing(2),'&[data-active="true"]':{backgroundColor:"rgba(0,0,0, .2)"}}})),ya=Ht.styled.div((function(e){return{pointerEvents:"all",display:"inline-block"}}));function ba(e){var t=o.useState(!1),n=(0,u.Z)(t,2),r=n[0],i=n[1],a=o.useState(!1),s=(0,u.Z)(a,2),c=s[0],l=s[1],d=o.useRef(null);o.useEffect((function(){var t;e.show&&(window.component_draggable=(null===(t=window)||void 0===t?void 0:t.component_draggable)+1||0,d.current="draggable_"+window.component_draggable,l(!0))}),[e.show]);var f=d.current;return c?(0,ht.jsx)(ga,{"data-active":r,children:(0,ht.jsx)(va(),{disabled:e.disabled,allowAnyClick:!0,bounds:"parent",axis:"both",handle:"."+f,defaultPosition:e.defaultPosition,position:null,grid:[1,1],scale:1,onStart:function(){var e;(e=console).warn.apply(e,arguments),i(!0)},onDrag:function(e,t){console.log("Event: ",e),console.log("Data: ",t)},onStop:function(){var e;(e=console).warn.apply(e,arguments),i(!1)},children:(0,ht.jsx)(ya,{children:(0,ht.jsx)(ha.Z,{mountOnEnter:!0,unmountOnExit:!0,in:e.show,onExited:function(){l(!1)},style:{transitionDelay:(e.show,"100ms")},children:e.children({active:r,CardHandler:function(e){return(0,ht.jsx)("div",{className:f,style:{cursor:"move"},children:e.children})},handleClass:f})})})})}):(0,ht.jsx)("div",{})}ba.defaultProps={defaultPosition:{x:0,y:0},disabled:!1,show:!0};var xa=ba,wa=Ht.styled.ul((function(e){return{pointerEvents:"all",backgroundColor:"blue",width:150,height:150,boxShadow:e.shadows[5],overflow:"hidden",borderRadius:e.shape.borderRadius,transition:e.transitions.create(["background-color"]),'&[data-active="true"]':{backgroundColor:"red"},'& > [data-li="handler"]':{backgroundColor:"rgba(0,0,0, .2)",display:"flex",alignItems:"center","& > div":{flexGrow:1,padding:e.spacing(1)}},'& > [data-li="body"]':{padding:e.spacing(1)}}}));var ja=function(e){var t=ln(),n=t.draggableCard,r=n.data,i=n.active;return(0,ht.jsx)(xa,{show:i,disabled:!1,defaultPosition:{x:600,y:100},children:function(e){var n=e.active,i=e.CardHandler;e.handleClass;return(0,ht.jsxs)(wa,{"data-active":n,children:[(0,ht.jsxs)("li",{"data-li":"handler",children:[(0,ht.jsx)(i,{children:null===r||void 0===r?void 0:r.title}),(0,ht.jsx)(Vn.Z,{variant:"outlined",onClick:function(){t.draggableCard.close()},children:(0,ht.jsx)(Bn.Z,{children:"close"})})]}),(0,ht.jsx)("li",{"data-li":"body",children:null===r||void 0===r?void 0:r.body})]})}})},Ca=Ht.styled.div((function(e){return{"&[data-layout-visible]":{transition:e.transitions.create(["opacity"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},'&[data-layout-visible="true"]':{opacity:0,pointerEvents:"none"}}})),Sa=Ht.styled.ul((function(e){return{position:"absolute",zIndex:e.zIndex.appBar+10,top:0,left:0,right:0,bottom:0,height:"var(--window-height)",display:"flex",flexDirection:"column",'& > [data-li="content"]':{flex:1,position:"relative"},'& > li > [data-list="bottom"]':{background:"linear-gradient(0deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.7) 30%, rgba(0,0,0,0.5) 60%, rgba(0,0,0,0) 100%)",'& > [data-li="appbar"]':{pointerEvents:"all"},'& > [data-li="panels"]':{}}}}));function Oa(e){var t=$t(),n=ln(),r=o.useRef(null),i=(0,sn.useContainerDimensions)(r),a=t.state.mouse_moving,s=n.state.ui_visible;return(0,ht.jsxs)(Ca,{"data-layout-visible":a,children:[(0,ht.jsx)(pa,{show:s,height:null===i||void 0===i?void 0:i.height}),(0,ht.jsxs)(Sa,{children:[(0,ht.jsx)("li",{"data-li":"content",ref:r,children:(0,ht.jsx)(ja,{})}),(0,ht.jsx)("li",{children:(0,ht.jsxs)("ul",{"data-list":"bottom",children:[(0,ht.jsx)("li",{"data-li":"panels",children:(0,ht.jsx)(Kr.Z,{in:s,mountOnEnter:!1,unmountOnExit:!1,orientation:"vertical",children:(0,ht.jsx)(Ho,{})})}),(0,ht.jsx)("li",{"data-li":"appbar",children:(0,ht.jsx)(uo,{})})]})})]})]})}Oa.defaultProps={};var Pa=Oa,ka=n(3794);var Ta=function(){var e=(0,sn.useNotify)(),t=(0,ka.Z)().isOnline;return o.useEffect((function(){var n="is-offline";t?e.classByKey(n):e.error("You are currently offline!",{key:n,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:1e5})}),[t]),(0,ht.jsx)("div",{})};var Ra=function(e){var t=(0,sn.useNotify)(),n=$t(),r=Nt(),i=o.useState(!1),a=(0,u.Z)(i,2),l=a[0],d=a[1],f=r.state.seconds_to_kill,p=vn({seconds:f,onProgress:function(e){var t=v()().add(f,"seconds").format("HH:mm");d(t)}});o.useEffect((function(){n.state.loaded||(p.stop(),h.hide())}),[n.state.loaded]),o.useEffect((function(){n.state.loaded&&(f>=r.MIN_SECONDS_TO_KILL?(p.stop(),h.hide()):(p.start(),h.show()))}),[n.state.loaded,f]);var h=new(function(){function e(){(0,s.default)(this,e),this.key="kill-stream"}return(0,c.default)(e,[{key:"show",value:function(){t.warning("No activity. The connection will be closed in "+l,{key:this.key,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:1e5})}},{key:"hide",value:function(){t.classByKey(this.key)}}]),e}());return(0,ht.jsx)("div",{})};function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _a=Ht.styled.ul((function(e){return{width:400,padding:e.spacing(0,1,1)}}));function Za(e){var t=(0,sn.useNotify)();o.useImperativeHandle(e.innerRef,(function(){return{onCommand:function(e){var r=n(e);null!==e&&void 0!==e&&e.error?t.error(e.error,{title:void 0,key:"error"}):["console_command"].includes(null===e||void 0===e?void 0:e.type)||t.info(r,{title:e.type,key:e.verification_id})}}}));var n=function(e){return(0,ht.jsx)(_a,{children:(0,ht.jsx)(Ur,{label:void 0,content:e,height:150,onChange:function(){},viewOnly:!0})})};return(0,ht.jsx)("div",{})}var Ma=o.forwardRef((function(e,t){return(0,ht.jsx)(Za,Da(Da({},e),{},{innerRef:t}))}));function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function La(e){var t=o.useRef(null),n=$t();return o.useImperativeHandle(e.innerRef,(function(){return{onCommand:function(e){t.current.onCommand(e)}}})),(0,ht.jsxs)(ht.Fragment,{children:[(0,ht.jsx)(Ta,{}),n.state.loaded&&(0,ht.jsx)(Ra,{}),(0,ht.jsx)(Ma,{ref:t})]})}var Ba=o.forwardRef((function(e,t){return(0,ht.jsx)(La,Aa(Aa({},e),{},{innerRef:t}))}));function za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?za(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fa(e){$t(),Nt();var t=o.useRef(null),n=o.useRef(null);return(0,sn.useUnload)((function(e){e.preventDefault(),e.returnValue=""})),o.useImperativeHandle(e.innerRef,(function(){return{onCommand:function(e){t.current.onCommand(e),n.current.onShow(e)}}})),(0,ht.jsxs)("div",{children:[(0,ht.jsx)(Ii,{}),(0,ht.jsx)(In,{ref:n}),(0,ht.jsx)(Rn,{}),(0,ht.jsx)(Ln,{}),(0,ht.jsx)(Wn,{}),(0,ht.jsx)(Ba,{ref:t}),(0,ht.jsx)(Ri,{}),(0,ht.jsx)(Pa,{})]})}var Na=function(e){return(0,ht.jsx)(fn,{children:(0,ht.jsx)(Fa,Ua({},e))})},Wa=o.forwardRef((function(e,t){return(0,ht.jsx)(Na,Ua(Ua({},e),{},{innerRef:t}))})),Ha=Ht.styled.div((function(e){return{position:"absolute",zIndex:-1,top:0,bottom:0,left:0,right:0,height:"var(--window-height)",display:"flex",alignItems:"center",justifyContent:"center"}}));var qa=function(){return(0,ht.jsx)(Ha,{children:(0,ht.jsx)(bn.Z,{color:"inherit",size:30})})},Va=["autoConnect"];function Ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ga(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ja=Ht.styled.div((function(e){return{backgroundColor:"rgba(0,0,0, 1)",height:"var(--window-height)"}})),Qa=a.env.isDev;function Ya(e){var t=e.autoConnect,n=((0,i.Z)(e,Va),Nt()),r=o.useRef(null),a=o.useRef(null);return o.useEffect((function(){t&&n.onRequestStream()}),[]),n.state.auto_connect&&!n.state.loaded?(0,ht.jsx)("div",{}):(0,ht.jsxs)(Ja,{children:[(0,ht.jsx)(qa,{}),(0,ht.jsx)(Zt,{ref:r,onLoad:function(e){console.warn("loaded",e)},onConnect:function(){console.warn("connected")},onRestart:function(){console.warn("onRestart")},onError:function(e){console.error("error",e)},onClose:function(e){console.error("closed",e)},onCommand:function(e){console.warn("command",e),a.current.onCommand(e)},onCallback:function(e){console.warn("callback",e)},onProgress:function(e){console.warn("progress",e)},onDebug:function(e){console.warn("debug",e)},autoConnect:t,quality:1,isDev:Qa,host:n.state.host,port:n.state.port,children:function(e){return(0,ht.jsx)(Wa,{ref:a})}})]})}Ya.defaultProps={autoConnect:!1};var $a=function(e){return(0,ht.jsx)(Wt,{children:(0,ht.jsx)(Ya,Ka({},e))})}},4257:function(e,t,n){"use strict";var r=n(2777),i=n(2262),o=(n(2043),5),a=1,s=a,c=new(function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,[{key:"_event",value:function(e,t,n){if(s!==a||n===a){var r=new CustomEvent("ps_debug",{detail:{type:e,payload:t}});document.dispatchEvent(r)}}},{key:"func",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._event("func",t,o)}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._event("log",t,a)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._event("warn",t,a)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._event("info",t,a)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._event("error",t,a)}},{key:"webrtc",get:function(){var e=this;return{log:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._event("webrtc:log",n,o)},warn:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._event("webrtc:warn",n,o)},info:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._event("webrtc:info",n,o)},error:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._event("webrtc:error",n,o)}}}}]),e}());t.Z=c},3647:function(e){e.exports=function(){function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return i(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,n){"use strict";var r=(0,e("./adapter_factory.js").adapterFactory)({window:window});t.exports=r},{"./adapter_factory.js":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=l;var r=u(e("./utils")),i=u(e("./chrome/chrome_shim")),o=u(e("./firefox/firefox_shim")),a=u(e("./safari/safari_shim")),s=u(e("./common_shim")),c=u(e("sdp"));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},n=r.log,u=r.detectBrowser(e),l={browserDetails:u,commonShim:s,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings,sdp:c};switch(u.browser){case"chrome":if(!i||!i.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),l;if(null===u.version)return n("Chrome shim can not determine version, not shimming."),l;n("adapter.js shimming chrome."),l.browserShim=i,s.shimAddIceCandidateNullOrEmpty(e,u),s.shimParameterlessSetLocalDescription(e,u),i.shimGetUserMedia(e,u),i.shimMediaStream(e,u),i.shimPeerConnection(e,u),i.shimOnTrack(e,u),i.shimAddTrackRemoveTrack(e,u),i.shimGetSendersWithDtmf(e,u),i.shimGetStats(e,u),i.shimSenderReceiverGetStats(e,u),i.fixNegotiationNeeded(e,u),s.shimRTCIceCandidate(e,u),s.shimConnectionState(e,u),s.shimMaxMessageSize(e,u),s.shimSendThrowTypeError(e,u),s.removeExtmapAllowMixed(e,u);break;case"firefox":if(!o||!o.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),l;n("adapter.js shimming firefox."),l.browserShim=o,s.shimAddIceCandidateNullOrEmpty(e,u),s.shimParameterlessSetLocalDescription(e,u),o.shimGetUserMedia(e,u),o.shimPeerConnection(e,u),o.shimOnTrack(e,u),o.shimRemoveStream(e,u),o.shimSenderGetStats(e,u),o.shimReceiverGetStats(e,u),o.shimRTCDataChannel(e,u),o.shimAddTransceiver(e,u),o.shimGetParameters(e,u),o.shimCreateOffer(e,u),o.shimCreateAnswer(e,u),s.shimRTCIceCandidate(e,u),s.shimConnectionState(e,u),s.shimMaxMessageSize(e,u),s.shimSendThrowTypeError(e,u);break;case"safari":if(!a||!t.shimSafari)return n("Safari shim is not included in this adapter release."),l;n("adapter.js shimming safari."),l.browserShim=a,s.shimAddIceCandidateNullOrEmpty(e,u),s.shimParameterlessSetLocalDescription(e,u),a.shimRTCIceServerUrls(e,u),a.shimCreateOfferLegacy(e,u),a.shimCallbacksAPI(e,u),a.shimLocalStreamsAPI(e,u),a.shimRemoteStreamsAPI(e,u),a.shimTrackEventTransceiver(e,u),a.shimGetUserMedia(e,u),a.shimAudioContext(e,u),s.shimRTCIceCandidate(e,u),s.shimMaxMessageSize(e,u),s.shimSendThrowTypeError(e,u),s.removeExtmapAllowMixed(e,u);break;default:n("Unsupported browser!")}return l}},{"./chrome/chrome_shim":3,"./common_shim":6,"./firefox/firefox_shim":7,"./safari/safari_shim":10,"./utils":11,sdp:12}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimMediaStream=u,n.shimOnTrack=l,n.shimGetSendersWithDtmf=d,n.shimGetStats=f,n.shimSenderReceiverGetStats=p,n.shimAddTrackRemoveTrackWithNative=h,n.shimAddTrackRemoveTrack=m,n.shimPeerConnection=v,n.fixNegotiationNeeded=g;var a=s(e("../utils.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function l(e){if("object"===r(e)&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else a.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function d(e){if("object"===r(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===r(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function f(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"===typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i(s(a(e)))};return t.apply(this,[c,r])}return new Promise((function(n,r){t.apply(e,[function(e){n(s(a(e)))},r])})).then(i,o)}}}function p(e){if("object"===r(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,r=void 0,i=void 0;return this.getSenders().forEach((function(e){e.track===t&&(n?i=!0:n=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(r?i=!0:r=e),e.track===t})),i||n&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function h(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function m(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return h(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=c({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"===typeof arguments[0]?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=u(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var n=void 0;Object.keys(this._streams).forEach((function(r){t._streams[r].getTracks().find((function(t){return e.track===t}))&&(n=t._streams[r])})),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function u(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function v(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function g(e,t){a.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}},{"../utils.js":11,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){"use strict";function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=r},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.shimGetUserMedia=a;var o=i(e("../utils.js")).log;function a(e,t){var n=e&&e.navigator;if(n.mediaDevices){var i=function(e){if("object"!==("undefined"===typeof e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"===typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var a={};"number"===typeof i.ideal?(a[o("min",n)]=i.ideal,t.optional.push(a),(a={})[o("max",n)]=i.ideal,t.optional.push(a)):(a[o("",n)]=i.ideal,t.optional.push(a))}void 0!==i.exact&&"number"!==typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach((function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,a){if(t.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===r(e.audio)){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===r(e.video)){var c=e.video.facingMode;c=c&&("object"===("undefined"===typeof c?"undefined":r(c))?c:{ideal:c});var u=t.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||u)){delete e.video.facingMode;var l=void 0;if("environment"===c.exact||"environment"===c.ideal?l=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(l=["front"]),l)return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return l.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&l.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=i(e.video),o("chrome: "+JSON.stringify(e)),a(e)}))}e.video=i(e.video)}return o("chrome: "+JSON.stringify(e)),a(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},c=function(e,t,r){a(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(s(e))}))}))};if(n.getUserMedia=c.bind(n),n.mediaDevices.getUserMedia){var u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return u(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(s(e))}))}))}}}}},{"../utils.js":11}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimRTCIceCandidate=c,n.shimMaxMessageSize=u,n.shimSendThrowTypeError=l,n.shimConnectionState=d,n.removeExtmapAllowMixed=f,n.shimAddIceCandidateNullOrEmpty=p,n.shimParameterlessSetLocalDescription=h;var i=s(e("sdp")),o=a(e("./utils"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),o=i.default.parseCandidate(e.candidate),a=Object.assign(n,o);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,o.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function u(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=i.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=i.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!==n?-1:n},o=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},a=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var o=i.default.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?r=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),n(arguments[0])){var e=r(arguments[0]),i=o(e),c=a(arguments[0],e),u=void 0;u=0===i&&0===c?Number.POSITIVE_INFINITY:0===i||0===c?Math.max(i,c):Math.min(i,c);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return u}}),this._sctp=l}return s.apply(this,arguments)}}}function l(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},o.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function d(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function f(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71)&&!("safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function p(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function h(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,t=arguments[0]||{};if("object"!==("undefined"===typeof t?"undefined":r(t))||t.type&&t.sdp)return n.apply(this,arguments);if(!(t={type:t.type,sdp:t.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}return t.sdp||"offer"!==t.type&&"answer"!==t.type?n.apply(this,[t]):("offer"===t.type?this.createOffer:this.createAnswer).apply(this).then((function(t){return n.apply(e,[t])}))})}}},{"./utils":11,sdp:12}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimOnTrack=u,n.shimPeerConnection=l,n.shimSenderGetStats=d,n.shimReceiverGetStats=f,n.shimRemoveStream=p,n.shimRTCDataChannel=h,n.shimAddTransceiver=m,n.shimGetParameters=v,n.shimCreateOffer=g,n.shimCreateAnswer=y;var a=s(e("../utils"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){"object"===r(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function l(e,t){if("object"===r(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),r=e[0],o=e[1],a=e[2];return i.apply(this,[r||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(r){if("TypeError"!==r.name)throw r;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,a)}}}function d(e){if("object"===r(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function f(e){if("object"===r(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function p(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;a.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function h(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function m(e){if("object"===r(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e.sendEncodings,i.sendEncodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function v(e){if("object"===r(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function g(e){if("object"===r(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}function y(e){if("object"===r(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}},{"../utils":11,"./getdisplaymedia":8,"./getusermedia":9}],8:[function(e,t,n){"use strict";function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=r},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimGetUserMedia=a;var i=o(e("../utils"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){var n=e&&e.navigator,o=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){i.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===("undefined"===typeof e?"undefined":r(e))&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},o&&o.prototype.getSettings){var c=o.prototype.getSettings;o.prototype.getSettings=function(){var e=c.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var u=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===("undefined"===typeof e?"undefined":r(e))&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}},{"../utils":11}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimLocalStreamsAPI=a,n.shimRemoteStreamsAPI=s,n.shimCallbacksAPI=c,n.shimGetUserMedia=u,n.shimConstraints=l,n.shimRTCIceServerUrls=d,n.shimTrackEventTransceiver=f,n.shimCreateOfferLegacy=p,n.shimAudioContext=h;var i=o(e("../utils"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){if("object"===r(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function s(e){if("object"===r(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function c(e){if("object"===r(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,o=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};var c=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=c,c=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=c,c=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=c}}function u(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(l(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function l(e){return e&&void 0!==e.video?Object.assign({},e,{video:i.compactObject(e.video)}):e}function d(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,r.push(a)):r.push(e.iceServers[o])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function f(e){"object"===r(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function p(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function h(e){"object"!==r(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},{"../utils":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.extractVersion=s,n.wrapPeerConnectionEvent=c,n.disableLog=u,n.disableWarnings=l,n.log=d,n.deprecated=f,n.detectBrowser=p,n.compactObject=m,n.walkStats=v,n.filterStats=g;var o=!0,a=!0;function s(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function c(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function u(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":r(e))+". Please use a boolean."):(o=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function l(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":r(e))+". Please use a boolean."):(a=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function d(){if("object"===r(window)){if(o)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function f(e,t){a&&console.warn(e+" is deprecated, please use "+t+" instead.")}function p(e){var t={browser:null,version:null};if(!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=s(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=s(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=s(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function h(e){return"[object Object]"===Object.prototype.toString.call(e)}function m(e){return h(e)?Object.keys(e).reduce((function(t,n){var r=h(e[n]),o=r?m(e[n]):e[n],a=r&&!Object.keys(o).length;return void 0===o||a?t:Object.assign(t,i({},n,o))}),{}):e}function v(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?v(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){v(e,e.get(t),n)}))})))}function g(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&v(e,n,i)}))})),i}},{}],12:[function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},i.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},i.getDescription=function(e){var t=i.splitSections(e);return t&&t[0]},i.getMediaSections=function(e){var t=i.splitSections(e);return t.shift(),t},i.matchPrefix=function(e,t){return i.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},i.parseCandidate=function(e){for(var t=void 0,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},i.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},i.parseIceOptions=function(e){return e.substr(14).split(" ")},i.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},i.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},i.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},i.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},i.parseFmtp=function(e){for(var t={},n=void 0,r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t[(n=r[i].trim().split("="))[0].trim()]=n[1];return t},i.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},i.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},i.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},i.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},i.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},i.getMid=function(e){var t=i.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},i.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},i.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:i.matchPrefix(e+t,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},i.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},i.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===r(e.keyParams)?i.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},i.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},i.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},i.getCryptoParameters=function(e,t){return i.matchPrefix(e+t,"a=crypto:").map(i.parseCryptoLine)},i.getIceParameters=function(e,t){var n=i.matchPrefix(e+t,"a=ice-ufrag:")[0],r=i.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&r?{usernameFragment:n.substr(12),password:r.substr(10)}:null},i.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},i.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=i.splitLines(e)[0].split(" "),r=3;r<n.length;r++){var o=n[r],a=i.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=i.parseRtpMap(a),c=i.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?i.parseFmtp(c[0]):{},s.rtcpFeedback=i.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(i.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return i.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(i.parseExtmap(e))})),t},i.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=i.writeRtpMap(e),n+=i.writeFmtp(e),n+=i.writeRtcpFb(e)}));var r=0;return t.codecs.forEach((function(e){e.maxptime>r&&(r=e.maxptime)})),r>0&&(n+="a=maxptime:"+r+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=i.writeExtmap(e)})),n},i.parseRtpEncodingParameters=function(e){var t=[],n=i.parseRtpParameters(e),r=-1!==n.fecMechanisms.indexOf("RED"),o=-1!==n.fecMechanisms.indexOf("ULPFEC"),a=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),s=a.length>0&&a[0].ssrc,c=void 0,u=i.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===s&&(c=u[0][1]),n.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&c&&(n.rtx={ssrc:c}),t.push(n),r&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:s,mechanism:o?"red+ulpfec":"red"},t.push(n))}})),0===t.length&&s&&t.push({ssrc:s});var l=i.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,t.forEach((function(e){e.maxBitrate=l}))),t},i.parseRtcpParameters=function(e){var t={},n=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var r=i.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=r.length>0,t.compound=0===r.length;var o=i.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},i.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},i.parseMsid=function(e){var t=void 0,n=i.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var r=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return r.length>0?{stream:(t=r[0].value.split(" "))[0],track:t[1]}:void 0},i.parseSctpDescription=function(e){var t=i.parseMLine(e),n=i.matchPrefix(e,"a=max-message-size:"),r=void 0;n.length>0&&(r=parseInt(n[0].substr(19),10)),isNaN(r)&&(r=65536);var o=i.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:t.fmt,maxMessageSize:r};var a=i.matchPrefix(e,"a=sctpmap:");if(a.length>0){var s=a[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:r}}},i.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(e,t,n){var r=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||i.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.getDirection=function(e,t){for(var n=i.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return t?i.getDirection(t):"sendrecv"},i.getKind=function(e){return i.splitLines(e)[0].split(" ")[0].substr(2)},i.isRejected=function(e){return"0"===e.split(" ",2)[1]},i.parseMLine=function(e){var t=i.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},i.parseOLine=function(e){var t=i.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},i.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var t=i.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"===("undefined"===typeof t?"undefined":r(t))&&(t.exports=i)},{}]},{},[1])(1)},5708:function(e,t,n){var r=n(7757),i=n(9376);function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=n(4257).Z;!function(t,a){var c=function(e){function t(e){e=e||{};var t=this;this.cfg=e.peerConnectionOptions||{},this.cfg.sdpSemantics="unified-plan",this.cfg.offerExtmapAllowMixed=!1,this.pcClient=null,this.dcClient=null,this.tnClient=null,this.sdpConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1,voiceActivityDetection:!1},this.dataChannelOptions={ordered:!0};var n=new URLSearchParams(window.location.search);this.useMic=n.has("useMic"),this.useMic||s.webrtc.log("Microphone access is not enabled. Pass ?useMic in the url to enable it.");var a="localhost"===location.hostname||"127.0.0.1"===location.hostname,c="https:"===location.protocol;!this.useMic||a||c||(this.useMic=!1,s.webrtc.error("Microphone access in the browser will not work if you are not on HTTPS or localhost. Disabling mic access."),s.webrtc.error("For testing you can enable HTTP microphone access Chrome by visiting chrome://flags/ and enabling 'unsafely-treat-insecure-origin-as-secure'")),this.latencyTestTimings={TestStartTimeMs:null,UEReceiptTimeMs:null,UEPreCaptureTimeMs:null,UEPostCaptureTimeMs:null,UEPreEncodeTimeMs:null,UEPostEncodeTimeMs:null,UETransmissionTimeMs:null,BrowserReceiptTimeMs:null,FrameDisplayDeltaTimeMs:null,Reset:function(){this.TestStartTimeMs=null,this.UEReceiptTimeMs=null,this.UEPreCaptureTimeMs=null,this.UEPostCaptureTimeMs=null,this.UEPreEncodeTimeMs=null,this.UEPostEncodeTimeMs=null,this.UETransmissionTimeMs=null,this.BrowserReceiptTimeMs=null,this.FrameDisplayDeltaTimeMs=null},SetUETimings:function(e){this.UEReceiptTimeMs=e.ReceiptTimeMs,this.UEPreCaptureTimeMs=e.PreCaptureTimeMs,this.UEPostCaptureTimeMs=e.PostCaptureTimeMs,this.UEPreEncodeTimeMs=e.PreEncodeTimeMs,this.UEPostEncodeTimeMs=e.PostEncodeTimeMs,this.UETransmissionTimeMs=e.TransmissionTimeMs,this.BrowserReceiptTimeMs=Date.now(),this.OnAllLatencyTimingsReady(this)},SetFrameDisplayDeltaTime:function(e){null==this.FrameDisplayDeltaTimeMs&&(this.FrameDisplayDeltaTimeMs=Math.round(e),this.OnAllLatencyTimingsReady(this))},OnAllLatencyTimingsReady:function(e){}},createWebRtcVideo=function(){var e=document.createElement("video");if(e.id="streamingVideo",e.playsInline=!0,e.disablepictureinpicture=!0,e.muted=!1,e.addEventListener("loadedmetadata",(function(e){t.onVideoInitialised&&t.onVideoInitialised()}),!0),"requestVideoFrameCallback"in HTMLVideoElement.prototype){var n=function n(r,i){if(i.receiveTime&&i.expectedDisplayTime){var o=i.presentationTime-i.receiveTime;t.aggregatedStats.receiveToCompositeMs=o}e.requestVideoFrameCallback(n)};e.requestVideoFrameCallback(n)}return e},this.video=createWebRtcVideo(),onsignalingstatechange=function(e){s.webrtc.info("signaling state change:",e)},oniceconnectionstatechange=function(e){s.webrtc.info("ice connection state change:",e)},onicegatheringstatechange=function(e){s.webrtc.info("ice gathering state change:",e)},handleOnTrack=function(e){if(s.webrtc.log("handleOnTrack",e.streams),e.track&&s.webrtc.log("Got track - "+e.track.kind+" id="+e.track.id+" readyState="+e.track.readyState),"audio"!=e.track.kind)return"video"==e.track.kind&&(t.video.srcObject,e.streams[0]),t.video.srcObject=e.streams[0],void s.webrtc.log("Set video source from video track ontrack.");handleOnAudioTrack(e.streams[0])},handleOnAudioTrack=function(e){if(t.video.srcObject!=e&&t.video.srcObject&&t.video.srcObject!==e){var n=document.createElement("Audio");n.autoplay=!0,n.srcObject=e,n.play(),s.webrtc.log("Created new audio element to play seperate audio stream.")}},setupDataChannel=function(e,n,r){try{var i=e.createDataChannel(n,r);return s.webrtc.log("Created datachannel (".concat(n,")")),i.binaryType="arraybuffer",i.onopen=function(e){s.webrtc.log("data channel (".concat(n,") connect")),t.onDataChannelConnected&&t.onDataChannelConnected()},i.onclose=function(e){s.webrtc.log("data channel (".concat(n,") closed"))},i.onmessage=function(e){t.onDataChannelMessage&&t.onDataChannelMessage(e.data)},i}catch(o){return s.webrtc.warn("No data channel",o),null}},onicecandidate=function(e){s.webrtc.log("ICE candidate",e),e.candidate&&e.candidate.candidate&&t.onWebRtcCandidate(e.candidate)},handleCreateOffer=function(e){e.createOffer(t.sdpConstraints).then((function(n){mungeSDPOffer(n),e.setLocalDescription(n),t.onWebRtcOffer&&t.onWebRtcOffer(n)}),(function(){s.webrtc.warn("Couldn't create offer")}))},mungeSDPOffer=function(e){e.sdp=e.sdp.replace("useinbandfec=1","useinbandfec=1;stereo=1;sprop-maxcapturerate=48000")},setupPeerConnection=function(e){e.SetBitrate&&s.webrtc.log("Hurray! there's RTCPeerConnection.SetBitrate function"),e.onsignalingstatechange=onsignalingstatechange,e.oniceconnectionstatechange=oniceconnectionstatechange,e.onicegatheringstatechange=onicegatheringstatechange,e.ontrack=handleOnTrack,e.onicecandidate=onicecandidate},generateAggregatedStatsFunction=function(){return t.aggregatedStats||(t.aggregatedStats={}),function(e){var n={};s.webrtc.log("----------------------------- Stats start -----------------------------"),e.forEach((function(e){"inbound-rtp"!=e.type||e.isRemote||"video"!=e.mediaType&&!e.id.toLowerCase().includes("video")||(n.timestamp=e.timestamp,n.bytesReceived=e.bytesReceived,n.framesDecoded=e.framesDecoded,n.packetsLost=e.packetsLost,n.bytesReceivedStart=t.aggregatedStats&&t.aggregatedStats.bytesReceivedStart?t.aggregatedStats.bytesReceivedStart:e.bytesReceived,n.framesDecodedStart=t.aggregatedStats&&t.aggregatedStats.framesDecodedStart?t.aggregatedStats.framesDecodedStart:e.framesDecoded,n.timestampStart=t.aggregatedStats&&t.aggregatedStats.timestampStart?t.aggregatedStats.timestampStart:e.timestamp,t.aggregatedStats&&t.aggregatedStats.timestamp&&(t.aggregatedStats.bytesReceived&&(n.bitrate=8*(n.bytesReceived-t.aggregatedStats.bytesReceived)/(n.timestamp-t.aggregatedStats.timestamp),n.bitrate=Math.floor(n.bitrate),n.lowBitrate=t.aggregatedStats.lowBitrate&&t.aggregatedStats.lowBitrate<n.bitrate?t.aggregatedStats.lowBitrate:n.bitrate,n.highBitrate=t.aggregatedStats.highBitrate&&t.aggregatedStats.highBitrate>n.bitrate?t.aggregatedStats.highBitrate:n.bitrate),t.aggregatedStats.bytesReceivedStart&&(n.avgBitrate=8*(n.bytesReceived-t.aggregatedStats.bytesReceivedStart)/(n.timestamp-t.aggregatedStats.timestampStart),n.avgBitrate=Math.floor(n.avgBitrate)),t.aggregatedStats.framesDecoded&&(n.framerate=(n.framesDecoded-t.aggregatedStats.framesDecoded)/((n.timestamp-t.aggregatedStats.timestamp)/1e3),n.framerate=Math.floor(n.framerate),n.lowFramerate=t.aggregatedStats.lowFramerate&&t.aggregatedStats.lowFramerate<n.framerate?t.aggregatedStats.lowFramerate:n.framerate,n.highFramerate=t.aggregatedStats.highFramerate&&t.aggregatedStats.highFramerate>n.framerate?t.aggregatedStats.highFramerate:n.framerate),t.aggregatedStats.framesDecodedStart&&(n.avgframerate=(n.framesDecoded-t.aggregatedStats.framesDecodedStart)/((n.timestamp-t.aggregatedStats.timestampStart)/1e3),n.avgframerate=Math.floor(n.avgframerate)))),"track"!=e.type||"video_label"!=e.trackIdentifier&&"video"!=e.kind||(n.framesDropped=e.framesDropped,n.framesReceived=e.framesReceived,n.framesDroppedPercentage=e.framesDropped/e.framesReceived*100,n.frameHeight=e.frameHeight,n.frameWidth=e.frameWidth,n.frameHeightStart=t.aggregatedStats&&t.aggregatedStats.frameHeightStart?t.aggregatedStats.frameHeightStart:e.frameHeight,n.frameWidthStart=t.aggregatedStats&&t.aggregatedStats.frameWidthStart?t.aggregatedStats.frameWidthStart:e.frameWidth),"candidate-pair"==e.type&&e.hasOwnProperty("currentRoundTripTime")&&0!=e.currentRoundTripTime&&(n.currentRoundTripTime=e.currentRoundTripTime)})),t.aggregatedStats.receiveToCompositeMs&&(n.receiveToCompositeMs=t.aggregatedStats.receiveToCompositeMs,t.latencyTestTimings.SetFrameDisplayDeltaTime(t.aggregatedStats.receiveToCompositeMs)),t.aggregatedStats=n,t.onAggregatedStats&&t.onAggregatedStats(n)}},setupTracksToSendAsync=function(){var e=i(r.mark((function e(n){var i,a,s,c,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.addTransceiver("video",{direction:"recvonly"}),t.useMic){e.next=5;break}n.addTransceiver("audio",{direction:"recvonly"}),e.next=10;break;case 5:return i=!!t.useMic&&{autoGainControl:!1,channelCount:1,echoCancellation:!1,latency:0,noiseSuppression:!1,sampleRate:16e3,volume:1},e.next=8,navigator.mediaDevices.getUserMedia({video:!1,audio:i});case 8:if(a=e.sent){s=o(a.getTracks());try{for(s.s();!(c=s.n()).done;)(u=c.value).kind&&"audio"==u.kind&&n.addTransceiver(u,{direction:"sendrecv"})}catch(r){s.e(r)}finally{s.f()}}else n.addTransceiver("audio",{direction:"recvonly"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.startLatencyTest=function(e){t.video&&(t.latencyTestTimings.Reset(),t.latencyTestTimings.TestStartTimeMs=Date.now(),e(t.latencyTestTimings.TestStartTimeMs))},this.handleCandidateFromServer=function(e){s.webrtc.log("ICE candidate: ",e);var n=new RTCIceCandidate(e);t.pcClient.addIceCandidate(n).then((function(e){s.webrtc.log("ICE candidate successfully added")}))},this.createOffer=function(){t.pcClient&&(s.webrtc.log("Closing existing PeerConnection"),t.pcClient.close(),t.pcClient=null),t.pcClient=new RTCPeerConnection(t.cfg),setupTracksToSendAsync(t.pcClient).finally((function(){setupPeerConnection(t.pcClient),t.dcClient=setupDataChannel(t.pcClient,"cirrus",t.dataChannelOptions),handleCreateOffer(t.pcClient)}))},this.receiveAnswer=function(e){s.webrtc.log("Received answer:"),s.webrtc.log(e);var n=new RTCSessionDescription(e);t.pcClient.setRemoteDescription(n);var r,i=o(t.pcClient.getReceivers());try{for(i.s();!(r=i.n()).done;){r.value.playoutDelayHint=0}}catch(a){i.e(a)}finally{i.f()}},this.close=function(){t.pcClient&&(s.webrtc.log("Closing existing peerClient"),t.pcClient.close(),t.pcClient=null),t.aggregateStatsIntervalId&&clearInterval(t.aggregateStatsIntervalId)},this.send=function(e){t.dcClient&&"open"==t.dcClient.readyState&&t.dcClient.send(e)},this.getStats=function(e){t.pcClient&&e&&t.pcClient.getStats(null).then((function(t){e(t)}))},this.aggregateStats=function(e){var n=generateAggregatedStatsFunction(),r=function(){t.getStats(n)};t.aggregateStatsIntervalId=setInterval(r,e)}}return t}(n(3647));e.exports=c}()},4147:function(e){"use strict";e.exports=JSON.parse('{"name":"MetaEditor","private":true,"version":"1.0.1","homepage":"https://markolofsen.github.io/metaeditor","engines":{"npm":">=8.1.2","node":">=16.13.2"},"scripts":{"dev":"open http://localhost:3000/ && next dev","build":"next build","start":"next start","export":"next export -o build","static":"next build && next export && http-server ./build/ -o -p 8080","deploy":"node .deploy/","lint":"next lint","test":"jest --watch --env=jsdom","test:ci":"jest --ci"},"workspaces":{"packages":["src/hooks/**","src/components/**/**","src/player/**","src/player/pixel_streaming/**"],"nohoist":[]},"dependencies":{"@emotion/react":"^11.5.0","@emotion/server":"^11.4.0","@emotion/styled":"^11.3.0","@mui/icons-material":"^5.0.5","@mui/lab":"^5.0.0-alpha.71","@mui/material":"^5.0.6","@mui/styles":"^5.4.4","@sentry/nextjs":"latest","eslint-typescript":"^1.1.0","lodash":"^4.17.21","next":"latest","next-pwa":"^5.4.0","react":"^17.0.2","react-dom":"^17.0.2"},"devDependencies":{"@babel/plugin-proposal-decorators":"^7.17.0","@babel/plugin-transform-runtime":"^7.17.0","@emotion/babel-plugin":"^11.7.2","@emotion/eslint-plugin":"^11.5.0","@testing-library/jest-dom":"5.14.1","@testing-library/react":"12.0.0","@testing-library/user-event":"13.2.1","@types/jest":"^27.0.2","@types/react":"^17.0.33","@typescript-eslint/eslint-plugin":"^5.2.0","@typescript-eslint/parser":"^5.2.0","babel-jest":"27.0.6","eslint":"<8.0.0","eslint-config-next":"latest","eslint-config-prettier":"^8.3.0","eslint-import-resolver-typescript":"^2.5.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-testing-library":"4.11.0","gh-pages":"^3.2.3","http-server":"^14.1.0","identity-obj-proxy":"3.0.0","jest":"27.0.6","prettier":"^2.4.1","react-test-renderer":"17.0.2","replace-in-file":"latest","typescript":"^4.4.4"}}')}}]);
//# sourceMappingURL=903-7e50bafb7ce057b7.js.map